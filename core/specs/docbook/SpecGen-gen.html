<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>D1.1a - VISHNU General specifications</title><meta name="generator" content="DocBook XSL Stylesheets V1.75.2" /></head><body><div class="book" title="D1.1a - VISHNU General specifications"><div class="titlepage"><div><div><h1 class="title"><a id="id2582535"></a>D1.1a - VISHNU General specifications</h1></div><div><div class="author"><h3 class="author"><span class="firstname">Benjamin</span> <span class="surname">Isnard</span></h3></div></div><div><div class="author"><h3 class="author"><span class="firstname">Daouda</span> <span class="surname">Traoré</span></h3></div></div><div><div class="author"><h3 class="author"><span class="firstname">Eugène</span> <span class="surname">Pamba Capo-Chichi</span></h3></div></div><div><div class="author"><h3 class="author"><span class="firstname">Kevin</span> <span class="surname">Coulomb</span></h3></div></div><div><div class="author"><h3 class="author"><span class="firstname">Ibrahima</span> <span class="surname">Cissé</span></h3></div></div><div><div class="revhistory"><table border="1" width="100%" summary="Revision history"><tr><th align="left" valign="top" colspan="3"><b>Revision History</b></th></tr><tr><td align="left">Revision 01</td><td align="left">07/12/2010</td><td align="left">SysFera</td></tr><tr><td align="left" colspan="3">
          
        <p>Formatting example</p></td></tr><tr><td align="left">Revision 02</td><td align="left">13/12/2010</td><td align="left">SysFera</td></tr><tr><td align="left" colspan="3">
            
          <p>Pre-deliverable</p></td></tr><tr><td align="left">Revision 03</td><td align="left">13/01/2011</td><td align="left">SysFera</td></tr><tr><td align="left" colspan="3">
            
          <p>First Release</p></td></tr><tr><td align="left">Revision 04</td><td align="left">10/02/2011</td><td align="left">SysFera</td></tr><tr><td align="left" colspan="3">
            
          <p>Modified 1.2, 1.4, U1, U1.1, U1.3.3, U1.3.4, U1.3.5, U1.4, U1.5, U2, U3, U4, U4.1, U4.2, UA1, UA1.1, UA6.2, UA7, T1.2, T2.6.
              Added UA1.3 and modified 2.3.</p></td></tr><tr><td align="left">Revision 05</td><td align="left">31/03/2011</td><td align="left">SysFera</td></tr><tr><td align="left" colspan="3">
            
          <p>Modified 4.2.6, UC IA2. Fix set threshold available in branch c, the threshold is the cpuload and not the number of processes</p></td></tr><tr><td align="left">Revision 06</td><td align="left">21/04/2011</td><td align="left">SysFera</td></tr><tr><td align="left" colspan="3">
          
        <p>
            Removed TA1. Added T1.7. Replaced T1.2 by T1.7.
          </p></td></tr><tr><td align="left">Revision 07</td><td align="left">16/12/2011</td><td align="left">SysFera</td></tr><tr><td align="left" colspan="3">
          
        <p>
            Added use of .netrc file in use case U1.1
          </p></td></tr><tr><td align="left">Revision 08</td><td align="left">18/01/2012</td><td align="left">SysFera</td></tr><tr><td align="left" colspan="3">
          
        <p>
            Added UC T1.2 and UC T2.8
          </p></td></tr><tr><td align="left">Revision 09</td><td align="left">26/01/2012</td><td align="left">SysFera</td></tr><tr><td align="left" colspan="3">
          
        <p>
            Modified U1.1, U1.5 and UA5.2. Added U5, U6, U6.1, U6.2, U6.3, UA8, UA8.1, UA8.2.
          </p></td></tr><tr><td align="left">Revision 10</td><td align="left">23/02/2012</td><td align="left">SysFera</td></tr><tr><td align="left" colspan="3">
          
        <p>
            Modified UA3 - Save configuration : added the list of user-authentication systems and the list of local user-authentication configs on file saved.
          </p></td></tr></table></div></div></div><hr /></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#id2825881">1. Document presentation</a></span></dt><dd><dl><dt><span class="section"><a href="#id2825887">Document objectives</a></span></dt><dt><span class="section"><a href="#id2825909">Document structure</a></span></dt><dt><span class="section"><a href="#id2826213">Use cases format description</a></span></dt><dt><span class="section"><a href="#id2826509">References</a></span></dt><dt><span class="section"><a href="#id2826519">Glossary</a></span></dt></dl></dd><dt><span class="chapter"><a href="#id2826612">2. Use cases for User Management Service (UMS)</a></span></dt><dd><dl><dt><span class="section"><a href="#id2826622">Use case diagrams
</a></span></dt><dd><dl><dt><span class="section"><a href="#id2826627">UC UMS User Manual</a></span></dt><dt><span class="section"><a href="#id2826660">UC UMS User Auto</a></span></dt><dt><span class="section"><a href="#id2826694">UC UMS User account</a></span></dt><dt><span class="section"><a href="#id2826727">UC UMS Admin</a></span></dt><dt><span class="section"><a href="#id2826758">UC UMS Admin Machines</a></span></dt><dt><span class="section"><a href="#id2826793">UC UMS Admin Authentication Systems</a></span></dt><dt><span class="section"><a href="#id2826828">UC UMS User Authentication Systems</a></span></dt></dl></dd><dt><span class="section"><a href="#id2826864">Use case descriptions
</a></span></dt><dd><dl><dt><span class="section"><a href="#id2826870">U1 - Session with manual closure</a></span></dt><dt><span class="section"><a href="#id2827034">U1.1 - Open session</a></span></dt><dt><span class="section"><a href="#id2827239">U1.2 - Close session</a></span></dt><dt><span class="section"><a href="#id2827408">U1.3 - Execute synchronous user request</a></span></dt><dt><span class="section"><a href="#id2827566">U1.3.1 - Configure Option</a></span></dt><dt><span class="section"><a href="#id2827691">U1.3.2 - Display options</a></span></dt><dt><span class="section"><a href="#id2827819">U1.3.3 - Change password</a></span></dt><dt><span class="section"><a href="#id2827944">U1.3.4 - Display session command history</a></span></dt><dt><span class="section"><a href="#id2828080">U1.3.5 - Display sessions log</a></span></dt><dt><span class="section"><a href="#id2828213">U1.4 - Execute asynchronous user request</a></span></dt><dt><span class="section"><a href="#id2828377">U1.5 - Reconnect to session</a></span></dt><dt><span class="section"><a href="#id2828572">U2 - Session with automatic closure on timeout</a></span></dt><dt><span class="section"><a href="#id2828744">U2.1 - Close session auto</a></span></dt><dt><span class="section"><a href="#id2828889">U3 - Session with automatic closure on disconnect</a></span></dt><dt><span class="section"><a href="#id2829059">U4 - Create new local user config</a></span></dt><dt><span class="section"><a href="#id2829220">U4.1 - Update local user config</a></span></dt><dt><span class="section"><a href="#id2829359">U4.2 - Delete local user config</a></span></dt><dt><span class="section"><a href="#id2829499">U4.3 - Display local user configs</a></span></dt><dt><span class="section"><a href="#id2829619">U5 - Display user authentication systems</a></span></dt><dt><span class="section"><a href="#id2829742">U6 - Create a new local user authentication config</a></span></dt><dt><span class="section"><a href="#id2829892">U6.1 - Update a local user authentication config</a></span></dt><dt><span class="section"><a href="#id2830038">U6.2 - Delete a local user authentication config</a></span></dt><dt><span class="section"><a href="#id2830181">U6.3 - Display local user authentication configs</a></span></dt><dt><span class="section"><a href="#id2830308">UA1 - Create new user account</a></span></dt><dt><span class="section"><a href="#id2830457">UA1.1 - Update user account</a></span></dt><dt><span class="section"><a href="#id2830599">UA1.2 - Delete user account</a></span></dt><dt><span class="section"><a href="#id2830731">UA1.3 - Lock user account</a></span></dt><dt><span class="section"><a href="#id2830862">UA2 - Reset user password</a></span></dt><dt><span class="section"><a href="#id2831006">UA3 - Save configuration</a></span></dt><dt><span class="section"><a href="#id2831137">UA4 - Restore configuration</a></span></dt><dt><span class="section"><a href="#id2831294">UA5.1 - Display sessions</a></span></dt><dt><span class="section"><a href="#id2831411">UA5.2 - Display users</a></span></dt><dt><span class="section"><a href="#id2831544">UA5.3 - Display local users configs</a></span></dt><dt><span class="section"><a href="#id2831672">UA6.1 Add a machine</a></span></dt><dt><span class="section"><a href="#id2831808">UA6.2 Remove a machine</a></span></dt><dt><span class="section"><a href="#id2831944">UA6.3 Display machines</a></span></dt><dt><span class="section"><a href="#id2832070">UA6.4 Update machines</a></span></dt><dt><span class="section"><a href="#id2832196">UA7 - Configure default option value</a></span></dt><dt><span class="section"><a href="#id2832327">UA8 - Create a new user authentication system</a></span></dt><dt><span class="section"><a href="#id2832457">UA8.1 - Update a user authentication system</a></span></dt><dt><span class="section"><a href="#id2832590">UA8.2 - Delete a user authentication system</a></span></dt></dl></dd><dt><span class="section"><a href="#id2832723">Data dictionary</a></span></dt></dl></dd><dt><span class="chapter"><a href="#id2832960">3. Use cases for Tasks Management Service (TMS)</a></span></dt><dd><dl><dt><span class="section"><a href="#id2832969">Use case diagrams
</a></span></dt><dd><dl><dt><span class="section"><a href="#id2832975">UC TMS Overview</a></span></dt></dl></dd><dt><span class="section"><a href="#id2833005">Use case descriptions
</a></span></dt><dd><dl><dt><span class="section"><a href="#id2833011">T1 - Asynchronous command on a machine</a></span></dt><dt><span class="section"><a href="#id2833196">T1.1 - Submit a job </a></span></dt><dt><span class="section"><a href="#id2833353">T1.2 Automatic Submit Job</a></span></dt><dt><span class="section"><a href="#id2833512">T2 - Synchronous command on a machine</a></span></dt><dt><span class="section"><a href="#id2833736">T2.1 - Get job information</a></span></dt><dt><span class="section"><a href="#id2833877">T2.2 - Cancel a job</a></span></dt><dt><span class="section"><a href="#id2834040">T2.3 - List job queues</a></span></dt><dt><span class="section"><a href="#id2834177">T2.4 - List jobs</a></span></dt><dt><span class="section"><a href="#id2834319">T2.5 - Get jobs progression</a></span></dt><dt><span class="section"><a href="#id2834485">T2.6 - Get one job outputs </a></span></dt><dt><span class="section"><a href="#id2834648">T2.7 - Get all completed jobs outputs </a></span></dt><dt><span class="section"><a href="#id2834814">T2.8 List Jobs on all machines</a></span></dt><dt><span class="section"><a href="#id2834954">TA3 - Launch TMS Server</a></span></dt><dt><span class="section"><a href="#id2835116">TA4 - Stop TMS Server</a></span></dt></dl></dd><dt><span class="section"><a href="#id2835243">Data dictionary</a></span></dt></dl></dd><dt><span class="chapter"><a href="#id2835349">4. Use cases for Information Management Service (IMS)</a></span></dt><dd><dl><dt><span class="section"><a href="#id2835359">Use case diagrams
</a></span></dt><dd><dl><dt><span class="section"><a href="#id2835365">UC IMS Global functionalities</a></span></dt><dt><span class="section"><a href="#id2835399">UC IMS Consult</a></span></dt><dt><span class="section"><a href="#id2835431">UC IMS Replay</a></span></dt><dt><span class="section"><a href="#id2835465">UC IMS Platform management</a></span></dt><dt><span class="section"><a href="#id2835499">UC IMS Stop Restart</a></span></dt></dl></dd><dt><span class="section"><a href="#id2835533">Use case descriptions
</a></span></dt><dd><dl><dt><span class="section"><a href="#id2835539">I1. Get the update frequency</a></span></dt><dt><span class="section"><a href="#id2835656">I2 Get metric data</a></span></dt><dt><span class="section"><a href="#id2835779">I3. Export and replay commands</a></span></dt><dt><span class="section"><a href="#id2835910">I4. Get data on the infrastructure</a></span></dt><dt><span class="section"><a href="#id2836029">I5. Get system info</a></span></dt><dt><span class="section"><a href="#id2836163">IA1. Get the running processes</a></span></dt><dt><span class="section"><a href="#id2836280">IA2. Define a system load threshold</a></span></dt><dt><span class="section"><a href="#id2836424">IA2.1 Get a system load threshold</a></span></dt><dt><span class="section"><a href="#id2836545">IA3. Define the identifiers</a></span></dt><dt><span class="section"><a href="#id2836704">IA4.1 Hard load shedding </a></span></dt><dt><span class="section"><a href="#id2836833">IA4.2 Soft load shedding</a></span></dt><dt><span class="section"><a href="#id2836957">IA5. Set system info</a></span></dt><dt><span class="section"><a href="#id2837082">IA6. Set the update frequency</a></span></dt><dt><span class="section"><a href="#id2837202">IA7. Notification of limit overflow</a></span></dt><dt><span class="section"><a href="#id2837326">IA8. Restart the System</a></span></dt><dt><span class="section"><a href="#id2837459">IA9. Restart</a></span></dt><dt><span class="section"><a href="#id2837585">U1.3 Execute synchronous request</a></span></dt></dl></dd><dt><span class="section"><a href="#id2837706">Data dictionary</a></span></dt></dl></dd><dt><span class="chapter"><a href="#id2837873">5. Use cases for File Management Service (FMS)</a></span></dt><dd><dl><dt><span class="section"><a href="#id2837883">Use case diagrams
</a></span></dt><dd><dl><dt><span class="section"><a href="#id2837888">UC FMS simple command use cases</a></span></dt><dt><span class="section"><a href="#id2837918">UC FMS transfer command use cases</a></span></dt></dl></dd><dt><span class="section"><a href="#id2837949">Use case descriptions
</a></span></dt><dd><dl><dt><span class="section"><a href="#id2837955">F1- Execute simple command on a remote host</a></span></dt><dt><span class="section"><a href="#id2838149">F1.CH1- Change access rights of files</a></span></dt><dt><span class="section"><a href="#id2838296">F1.CH2- Change group owner of files</a></span></dt><dt><span class="section"><a href="#id2838443">F1.CR1- Create new files</a></span></dt><dt><span class="section"><a href="#id2838588">F1.CR2- Create new directories</a></span></dt><dt><span class="section"><a href="#id2838735">F1.DE1- Delete files</a></span></dt><dt><span class="section"><a href="#id2838883">F1.DE2-  Delete directories</a></span></dt><dt><span class="section"><a href="#id2839032">F1.DI1- Display Head of files</a></span></dt><dt><span class="section"><a href="#id2839182">F1.DI2- Display tail of files</a></span></dt><dt><span class="section"><a href="#id2839330">F1.DI3- Display contents of files</a></span></dt><dt><span class="section"><a href="#id2839479">F1.DI4- Display contents of directories</a></span></dt><dt><span class="section"><a href="#id2839632">F1.DI5- Get information about remote files</a></span></dt><dt><span class="section"><a href="#id2839786">F2.CA1- Cancel  files tranfers</a></span></dt><dt><span class="section"><a href="#id2839944">F2.CA2- Cancel all users file transfers</a></span></dt><dt><span class="section"><a href="#id2840103">F2.CP1- Execute a synchronous copy of files </a></span></dt><dt><span class="section"><a href="#id2840314">F2.CP2- Execute an asynchronous copy of files </a></span></dt><dt><span class="section"><a href="#id2840527">F2.LS1- List file transfer status</a></span></dt><dt><span class="section"><a href="#id2840696">F2.LS2- List all users file transfer status</a></span></dt><dt><span class="section"><a href="#id2840873">F2.LT1- List all file transfer  </a></span></dt><dt><span class="section"><a href="#id2841035">F2.LT2- List all users file transfer  </a></span></dt><dt><span class="section"><a href="#id2841205">F2.MV1- Execute a synchronous move of files</a></span></dt><dt><span class="section"><a href="#id2841411">F2.MV2- Execute an asynchronous move of files</a></span></dt><dt><span class="section"><a href="#id2841626">F3. Launch FMS server</a></span></dt><dt><span class="section"><a href="#id2841783">F4. Stop FMS server</a></span></dt></dl></dd><dt><span class="section"><a href="#id2841910">Data dictionary</a></span></dt></dl></dd></dl></div><div class="list-of-figures"><p><b>List of Figures</b></p><dl><dt>2.1. <a href="#id2826637">UC UMS User Manual</a></dt><dt>2.2. <a href="#id2826671">UC UMS User Auto</a></dt><dt>2.3. <a href="#id2826704">UC UMS User account</a></dt><dt>2.4. <a href="#id2826736">UC UMS Admin</a></dt><dt>2.5. <a href="#id2826769">UC UMS Admin Machines</a></dt><dt>2.6. <a href="#id2826804">UC UMS Admin Authentication Systems</a></dt><dt>2.7. <a href="#id2826839">UC UMS User Authentication Systems</a></dt><dt>3.1. <a href="#id2832981">UC TMS Overview</a></dt><dt>4.1. <a href="#id2835375">UC IMS Global functionalities</a></dt><dt>4.2. <a href="#id2835408">UC IMS Consult</a></dt><dt>4.3. <a href="#id2835441">UC IMS Replay</a></dt><dt>4.4. <a href="#id2835475">UC IMS Platform management</a></dt><dt>4.5. <a href="#id2835509">UC IMS Stop Restart</a></dt><dt>5.1. <a href="#id2837894">UC FMS simple command use cases</a></dt><dt>5.2. <a href="#id2837924">UC FMS transfer command use cases</a></dt></dl></div><div class="chapter" title="Chapter 1. Document presentation"><div class="titlepage"><div><div><h2 class="title"><a id="id2825881"></a>Chapter 1. Document presentation</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#id2825887">Document objectives</a></span></dt><dt><span class="section"><a href="#id2825909">Document structure</a></span></dt><dt><span class="section"><a href="#id2826213">Use cases format description</a></span></dt><dt><span class="section"><a href="#id2826509">References</a></span></dt><dt><span class="section"><a href="#id2826519">Glossary</a></span></dt></dl></div><div class="section" title="Document objectives"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2825887"></a>Document objectives</h2></div></div></div><p>This document presents the external specifications of the Vishnu system at a general
        level. At this level, we describe the interaction of a user with the system without
        providing implementation details. The different steps that constitute one scenario are
        detailed as well as the content of the messages exchanged. The main objective is to describe
        the system from the user point of view.</p><p>These general specifications are a prerequisite for the detailed specifications step in
        the software development process.</p></div><div class="section" title="Document structure"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2825909"></a>Document structure</h2></div></div></div><p>The document is divided into 4 parts corresponding to the 4 modules that compose the
        Vishnu system:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>UMS: Users Management Service</p></li><li class="listitem"><p>TMS: Tasks Management Service</p></li><li class="listitem"><p>FMS: Files Management Service</p></li><li class="listitem"><p>IMS: Information Management Service</p></li></ul></div><p>Each module  corresponds to a chapter in the document, and each chapter contains three sections:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>A first section containing "Use case descriptions" that follow the standard UML
              description of a use case. Each use case is identified by a code beginning with a letter corresponding to the
              VISHNU Module that realizes the use case (U for UMS, T for TMS, F for FMS, I for IMS).</p></li><li class="listitem"><p>A second section containing the "Use case diagrams" that describe the organization
              of the different use cases (see §1.3 for a more precise definition of use cases).</p></li><li class="listitem"><p>A third section containing the "Data dictionary" that contains the definitions of the words or expressions
              used in the use cases of the module.</p></li></ul></div></div><div class="section" title="Use cases format description"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2826213"></a>Use cases format description</h2></div></div></div><p>The specifications of VISHNU functionalities are formatted as "use case descriptions" and "use case diagrams"
      following the UML standard. Each use
      case is the description of a scenario that a VISHNU user will follow when using the system, and it details each step of the
      user/system interaction. The use cases do not describe the internal steps that the user should not be aware of, and that may be
      specific to the implementation of the use case.</p><p>Each <span class="bold"><strong>use case description</strong></span> can contain the following elements:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="bold"><strong>Title</strong></span>: Contains the use case code and name.</p></li><li class="listitem"><p><span class="bold"><strong>Summary</strong></span>: Describes the main objective of the use case.</p></li><li class="listitem"><p><span class="bold"><strong>Actors</strong></span>: Contains respectively "User", "Admin" or both when
                 the use case applies respectively to a standard user, an administrator or both classes of users.
            </p></li><li class="listitem"><p><span class="bold"><strong>Precondition</strong></span>: Contains the conditions that should be realized before the use case runs.</p></li><li class="listitem"><p><span class="bold"><strong>Postcondition</strong></span>: Contains the conditions that should be realized when the basic sequences or
             the branch sequences are finished.</p></li><li class="listitem"><p><span class="bold"><strong>Base sequence</strong></span>: Contains the basic sequence in chronological order between the Actor and the System. Each step 
            of the sequence is identified by a number.</p></li><li class="listitem"><p><span class="bold"><strong>Branch sequence</strong></span>: Contains the branch(es) of the base sequence. The branch step is identified by a
            number, a letter and eventually a number: the first number identies the branching point in the base sequence, the letter identifies
            the branch itself and the last number is used for the different steps within the branch. The postconditions should be realized after
            the branch is finished.</p></li><li class="listitem"><p><span class="bold"><strong>Exception sequence</strong></span>: Contains the errors that may happen during the base sequence or the branch
            sequence, as considered by users. The exceptions are identified by a base or branch step identifier (see above) followed by a letter that
            identifies the exception. The postconditions cannot be realized after the exception is thrown.</p></li><li class="listitem"><p><span class="bold"><strong>Extension of</strong></span>: Contains list of use cases that the current use case "extends" (see
             below for a definition of this relationship).</p></li><li class="listitem"><p><span class="bold"><strong>Extensions</strong></span>: Contains list of use cases that "extend" the current use case (see
             below for a definition of this relationship).</p></li><li class="listitem"><p><span class="bold"><strong>Notes</strong></span>: All things for understanding the use case can be recorded here.</p></li></ul></div><p>
      </p><p>Each <span class="bold"><strong>use case diagram</strong></span> show the relationships between Actors and use cases, and between use cases. All
      these relationships are defined in the UML standard and have the following meaning:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="bold"><strong>Generalization</strong></span> (shown as solid arrow with a large triangle head): the source use case inherits
            properties and behavior of the parent (target of the arrow) use case and may override the behavior of the parent. The preconditions, 
            postconditions and exceptions of the parent apply to the child use case. A use case that has child (specializations) of itself is
            shown in the use case diagram in <span class="bold"><strong>orange</strong></span> color.</p></li><li class="listitem"><p><span class="bold"><strong>Extension</strong></span> (shown as dashed arrow with "extend" stereotype): this is a directed relationship
            that specifies how and when the behavior defined in usually supplementary (optional) extending use case can be inserted into the behavior
            defined in the extended use case. Extending use case typically defines optional behavior that is not necessarily meaningful by itself.
            The extension takes place at one or more extension points defined in the extended use case by the "Include" keyword. </p></li><li class="listitem"><p><span class="bold"><strong>Inclusion</strong></span> (shown as dashed arrow with "include" stereotype): this is a directed relationship
            between two use cases when required, not optional behavior of the included use case is inserted into the behavior of the 
            including (base) use case. Including use case depends on the addition of the included use case. Including use cases are
            usually not complete by themselves and require the included use cases. A use case that has inclusions is shown in the use case
            diagram in <span class="bold"><strong>blue</strong></span> color.</p></li></ul></div><p>
      </p></div><div class="section" title="References"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2826509"></a>References</h2></div></div></div><p>None</p></div><div class="section" title="Glossary"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2826519"></a>Glossary</h2></div></div></div><p>
         </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="bold"><strong>Batch scheduler</strong></span>: system used to manage batch jobs on multi-processor systems or
            clusters.</p></li><li class="listitem"><p><span class="bold"><strong>Client system</strong></span>: computer system used to send requests to the VISHNU system either using the
               command-line interface or any API.</p></li><li class="listitem"><p><span class="bold"><strong>Exception</strong></span>: event happening during the execution of a use case scenario and that triggers a
               specific action from the System. This action can either be returning an error message to the user (if the used interface is interactive)
               or triggering a programing language exception if the used interface is programmatic.</p></li><li class="listitem"><p><span class="bold"><strong>Sysfera-DS</strong></span>: open-source middleware software used by Vishnu (former name
              "DIET")</p></li><li class="listitem"><p><span class="bold"><strong>UML</strong></span>: Unified Modeling Language (current version: v2.3)</p></li><li class="listitem"><p><span class="bold"><strong>VISHNU system</strong></span>: set of all elements (software, hardware, data) that compose a single instance of the
            VISHNU application and that work together to provide VISHNU services to the users.</p></li></ul></div><p>
      </p></div></div><div class="chapter" title="Chapter 2. Use cases for User Management Service (UMS)"><div class="titlepage"><div><div><h2 class="title"><a id="id2826612"></a>Chapter 2. Use cases for User Management Service (UMS)</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#id2826622">Use case diagrams
</a></span></dt><dd><dl><dt><span class="section"><a href="#id2826627">UC UMS User Manual</a></span></dt><dt><span class="section"><a href="#id2826660">UC UMS User Auto</a></span></dt><dt><span class="section"><a href="#id2826694">UC UMS User account</a></span></dt><dt><span class="section"><a href="#id2826727">UC UMS Admin</a></span></dt><dt><span class="section"><a href="#id2826758">UC UMS Admin Machines</a></span></dt><dt><span class="section"><a href="#id2826793">UC UMS Admin Authentication Systems</a></span></dt><dt><span class="section"><a href="#id2826828">UC UMS User Authentication Systems</a></span></dt></dl></dd><dt><span class="section"><a href="#id2826864">Use case descriptions
</a></span></dt><dd><dl><dt><span class="section"><a href="#id2826870">U1 - Session with manual closure</a></span></dt><dt><span class="section"><a href="#id2827034">U1.1 - Open session</a></span></dt><dt><span class="section"><a href="#id2827239">U1.2 - Close session</a></span></dt><dt><span class="section"><a href="#id2827408">U1.3 - Execute synchronous user request</a></span></dt><dt><span class="section"><a href="#id2827566">U1.3.1 - Configure Option</a></span></dt><dt><span class="section"><a href="#id2827691">U1.3.2 - Display options</a></span></dt><dt><span class="section"><a href="#id2827819">U1.3.3 - Change password</a></span></dt><dt><span class="section"><a href="#id2827944">U1.3.4 - Display session command history</a></span></dt><dt><span class="section"><a href="#id2828080">U1.3.5 - Display sessions log</a></span></dt><dt><span class="section"><a href="#id2828213">U1.4 - Execute asynchronous user request</a></span></dt><dt><span class="section"><a href="#id2828377">U1.5 - Reconnect to session</a></span></dt><dt><span class="section"><a href="#id2828572">U2 - Session with automatic closure on timeout</a></span></dt><dt><span class="section"><a href="#id2828744">U2.1 - Close session auto</a></span></dt><dt><span class="section"><a href="#id2828889">U3 - Session with automatic closure on disconnect</a></span></dt><dt><span class="section"><a href="#id2829059">U4 - Create new local user config</a></span></dt><dt><span class="section"><a href="#id2829220">U4.1 - Update local user config</a></span></dt><dt><span class="section"><a href="#id2829359">U4.2 - Delete local user config</a></span></dt><dt><span class="section"><a href="#id2829499">U4.3 - Display local user configs</a></span></dt><dt><span class="section"><a href="#id2829619">U5 - Display user authentication systems</a></span></dt><dt><span class="section"><a href="#id2829742">U6 - Create a new local user authentication config</a></span></dt><dt><span class="section"><a href="#id2829892">U6.1 - Update a local user authentication config</a></span></dt><dt><span class="section"><a href="#id2830038">U6.2 - Delete a local user authentication config</a></span></dt><dt><span class="section"><a href="#id2830181">U6.3 - Display local user authentication configs</a></span></dt><dt><span class="section"><a href="#id2830308">UA1 - Create new user account</a></span></dt><dt><span class="section"><a href="#id2830457">UA1.1 - Update user account</a></span></dt><dt><span class="section"><a href="#id2830599">UA1.2 - Delete user account</a></span></dt><dt><span class="section"><a href="#id2830731">UA1.3 - Lock user account</a></span></dt><dt><span class="section"><a href="#id2830862">UA2 - Reset user password</a></span></dt><dt><span class="section"><a href="#id2831006">UA3 - Save configuration</a></span></dt><dt><span class="section"><a href="#id2831137">UA4 - Restore configuration</a></span></dt><dt><span class="section"><a href="#id2831294">UA5.1 - Display sessions</a></span></dt><dt><span class="section"><a href="#id2831411">UA5.2 - Display users</a></span></dt><dt><span class="section"><a href="#id2831544">UA5.3 - Display local users configs</a></span></dt><dt><span class="section"><a href="#id2831672">UA6.1 Add a machine</a></span></dt><dt><span class="section"><a href="#id2831808">UA6.2 Remove a machine</a></span></dt><dt><span class="section"><a href="#id2831944">UA6.3 Display machines</a></span></dt><dt><span class="section"><a href="#id2832070">UA6.4 Update machines</a></span></dt><dt><span class="section"><a href="#id2832196">UA7 - Configure default option value</a></span></dt><dt><span class="section"><a href="#id2832327">UA8 - Create a new user authentication system</a></span></dt><dt><span class="section"><a href="#id2832457">UA8.1 - Update a user authentication system</a></span></dt><dt><span class="section"><a href="#id2832590">UA8.2 - Delete a user authentication system</a></span></dt></dl></dd><dt><span class="section"><a href="#id2832723">Data dictionary</a></span></dt></dl></div><div class="section" title="Use case diagrams"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2826622"></a>Use case diagrams
</h2></div></div></div><div class="section" title="UC UMS User Manual"><div class="titlepage"><div><div><h3 class="title"><a id="id2826627"></a>UC UMS User Manual</h3></div></div></div><p>This UseCase Diagram describes all cases that can occur when the user  opens a session with manual closure</p><div class="figure"><a id="id2826637"></a><p class="title"><b>Figure 2.1. UC UMS User Manual</b></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/png/UC UMS User Manual.png" align="middle" alt="UC UMS User Manual" /></div></div></div><br class="figure-break" /></div><div class="section" title="UC UMS User Auto"><div class="titlepage"><div><div><h3 class="title"><a id="id2826660"></a>UC UMS User Auto</h3></div></div></div><p>This UseCase Diagram describes all cases that can occur when a user  opens a session with automatic closure (on disconnect and on timeout)</p><div class="figure"><a id="id2826671"></a><p class="title"><b>Figure 2.2. UC UMS User Auto</b></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/png/UC UMS User Auto.png" align="middle" alt="UC UMS User Auto" /></div></div></div><br class="figure-break" /></div><div class="section" title="UC UMS User account"><div class="titlepage"><div><div><h3 class="title"><a id="id2826694"></a>UC UMS User account</h3></div></div></div><p>This UseCase Diagram describes all cases that can occur when a user  executes synchronous requests</p><div class="figure"><a id="id2826704"></a><p class="title"><b>Figure 2.3. UC UMS User account</b></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/png/UC UMS User account.png" align="middle" alt="UC UMS User account" /></div></div></div><br class="figure-break" /></div><div class="section" title="UC UMS Admin"><div class="titlepage"><div><div><h3 class="title"><a id="id2826727"></a>UC UMS Admin</h3></div></div></div><p>This UseCase Diagram describes all administrator's functions</p><div class="figure"><a id="id2826736"></a><p class="title"><b>Figure 2.4. UC UMS Admin</b></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/png/UC UMS Admin.png" align="middle" alt="UC UMS Admin" /></div></div></div><br class="figure-break" /></div><div class="section" title="UC UMS Admin Machines"><div class="titlepage"><div><div><h3 class="title"><a id="id2826758"></a>UC UMS Admin Machines</h3></div></div></div><p>This UseCase Diagram describes all cases that can occur when an administrator wants to administrate a machine</p><div class="figure"><a id="id2826769"></a><p class="title"><b>Figure 2.5. UC UMS Admin Machines</b></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/png/UC UMS Admin Machines.png" align="middle" alt="UC UMS Admin Machines" /></div></div></div><br class="figure-break" /></div><div class="section" title="UC UMS Admin Authentication Systems"><div class="titlepage"><div><div><h3 class="title"><a id="id2826793"></a>UC UMS Admin Authentication Systems</h3></div></div></div><p>This UseCase Diagram describes all cases that can occur when an administrator wants to administrate a user authentification system</p><div class="figure"><a id="id2826804"></a><p class="title"><b>Figure 2.6. UC UMS Admin Authentication Systems</b></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/png/UC UMS Admin Authentication Systems.png" align="middle" alt="UC UMS Admin Authentication Systems" /></div></div></div><br class="figure-break" /></div><div class="section" title="UC UMS User Authentication Systems"><div class="titlepage"><div><div><h3 class="title"><a id="id2826828"></a>UC UMS User Authentication Systems</h3></div></div></div><p>This UseCase Diagram describes all cases that can occur when a user wants to manage an account associated to an authentification system</p><div class="figure"><a id="id2826839"></a><p class="title"><b>Figure 2.7. UC UMS User Authentication Systems</b></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/png/UC UMS User Authentication Systems.png" align="middle" alt="UC UMS User Authentication Systems" /></div></div></div><br class="figure-break" /></div></div><div class="section" title="Use case descriptions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2826864"></a>Use case descriptions
</h2></div></div></div><div class="section" title="U1 - Session with manual closure"><div class="titlepage"><div><div><h3 class="title"><a id="id2826870"></a>U1 - Session with manual closure</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>U1 - Session with manual closure</p></td></tr><tr><td><p>Summary</p></td><td><p>The user opens a new session and closes it manually by using the  command for closure</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td><p>- The user is authenticated</p><p>- VISHNU is installed and running on the client System</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The session is closed</p><p>- A session log has been created</p><p>- All user requests submitted within the session are completed</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. Include::U1.1 Open session</p><p>2. System is ready to process user commands</p><p>3. Include::U1.2 Close session (before the maximum inactivity delay if option "Session closure policy" value is "Close on timeout")</p></td></tr><tr><td><p>Branch sequence</p></td><td><p>2a. U1.3 Execute synchronous user request</p><p>2b. U1.4 Execute asynchronous user request</p><p>2c. U1.5 Reconnect to session</p></td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. Include::U1.1 exceptions</p><p>3a. If session cannot be closed due to running commands, user must wait until all commands are completed before trying step 3 again</p></td></tr><tr><td><p>Extensions</p></td><td><p>U1.3 - Execute synchronous user request</p><p>U1.5 - Reconnect to session</p><p>U1.4 - Execute asynchronous user request</p></td></tr></tbody></table></div></div><div class="section" title="U1.1 - Open session"><div class="titlepage"><div><div><h3 class="title"><a id="id2827034"></a>U1.1 - Open session</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>U1.1 - Open session</p></td></tr><tr><td><p>Summary</p></td><td><p>The user opens a new session</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td><p> - The user is connected on a client System in which VISHNU is installed and which can be connected to the VISHNU infrastructure</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- A session is active</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. User provides login, password, and optionally the way for closing the session automatically (Session closure policy).</p><p>2. System validates login, password</p><p>3. System creates the session and activates it</p><p>4. System provides the session key to the user</p></td></tr><tr><td><p>Branch sequence</p></td><td><p>1a. An administrator can provide the login of another user so that the session is opened exactly as if she was that user, except the provided password must be the one of the administrator. The only difference with a session opened by the real user will be visible in the value of the session id, that will contain the administrator's login.</p><p>1b. When the login and the password provided are empty, the System will automatically read a vishnu user connection 's parameters (login and  password) on the .netrc file located in the home of the user. A VISHNU account is defined on the .netrc with the value vishnu for key machine. </p><p>1.c If several couples (userId, password) have been defined for the connection, each will be used in the order they appear until one is allowed to connect. </p><p>2a. If the password is a temporary password (after reset by the administrator) the System asks the user to enter a new password, then asks for a confirmation, and registers the new password if both steps are ok. If the User request is done through the API (non-interactive) then this is an exception (a change password request is required).</p></td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. The .netrc is not found. </p><p>1b. The permission of the .netrc file should be 600</p><p>1c. The machine vishnu is not found</p><p>1d. The login is undefined for the machine vishnu (the password must follow the login).</p><p>1e.  The password is undefined.</p><p>2a. The user login is unknown</p><p>2b. The user password is invalid</p><p>2c. The value for the "Session closure policy" option is invalid</p><p>2d. VISHNU infrastructure is unreachable or unavailable</p><p>2e. The user password is temporary and the request is non-interactive</p><p>2f. If the user is using the command-line interface and is already connected to a session in the same terminal then this session will remain active but will not be used for the user requests until the new session is closed.</p><p>2f. The substitute login provides by the administrator is unknown</p></td></tr><tr><td><p>Notes</p></td><td><p>This use case defines behaviour(s) that is/are not defined in the project initial requirements.</p></td></tr></tbody></table></div></div><div class="section" title="U1.2 - Close session"><div class="titlepage"><div><div><h3 class="title"><a id="id2827239"></a>U1.2 - Close session</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>U1.2 - Close session</p></td></tr><tr><td><p>Summary</p></td><td><p>The user closes the session manually</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td><p>- The user is connected on the client System</p><p>- The user has an open session on the client System</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The session is closed</p><p>-  A session log has been created</p><p>- All user requests submitted during the session are completed</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The user sends a request to close a session (the session key registered in the user's environment is sent to the System)</p><p>2. The System checks that the session key is valid and the corresponding session is open</p><p>3. The System checks that there are no running commands within the session</p><p>4. The System closes the session</p><p>5. The System informs the user that the session has been closed</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. VISHNU infrastructure is unreachable or unavailable</p><p>2a. The session key is invalid</p><p>2b. The session is already closed</p><p>2c. The session key is incompatible with the authenticated user (that means that the session identifier is not for the user who sends the requests).</p><p>3a. If there are running commands within the session, the System informs the user that the session cannot be closed</p></td></tr><tr><td><p>Notes</p></td><td><p>This use case defines behaviour(s) that is/are not defined in the project initial requirements.</p></td></tr></tbody></table></div></div><div class="section" title="U1.3 - Execute synchronous user request"><div class="titlepage"><div><div><h3 class="title"><a id="id2827408"></a>U1.3 - Execute synchronous user request</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>U1.3 - Execute synchronous user request</p></td></tr><tr><td><p>Summary</p></td><td><p>The user submits a synchronous request to the System</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td><p>- The user is connected on the client System</p><p>- The user has an open session on the client System</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The request is completed</p><p>- A request log is created</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The user sends the request to the System</p><p>2. The System returns the results to the user</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1.a Invalid session (bad session key or unavailable session)</p><p>1.b Invalid request</p><p>1.c Permission denied (admin request issued by normal user)</p><p>1.d Ressource not available</p><p>1.e VISHNU System crashed</p></td></tr><tr><td><p>Extension of</p></td><td><p>U1 - Session with manual closure</p><p>U3 - Session with automatic closure on disconnect</p><p>U2 - Session with automatic closure on timeout</p></td></tr></tbody></table></div></div><div class="section" title="U1.3.1 - Configure Option"><div class="titlepage"><div><div><h3 class="title"><a id="id2827566"></a>U1.3.1 - Configure Option</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>U1.3.1 - Configure Option</p></td></tr><tr><td><p>Summary</p></td><td><p>The user wants to modify the value of an option attached to his/her VISHNU account</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td><p>The option's value is modified</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The user sends a request for modifying the value of an option to the System</p><p>2. The System checks the option name and registers the new value for the option</p><p>3. The System returns an acknowledgment to the user</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>2a. Invalid option name</p><p>2b. Invalid option value</p></td></tr></tbody></table></div></div><div class="section" title="U1.3.2 - Display options"><div class="titlepage"><div><div><h3 class="title"><a id="id2827691"></a>U1.3.2 - Display options</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>U1.3.2 - Display options</p></td></tr><tr><td><p>Summary</p></td><td><p>The user displays options concerning his/her VISHNU account</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td> </td></tr><tr><td><p>Base sequence</p></td><td><p>1. The user sends a request to list all of his/her options</p><p>2. The System returns all options of the user</p></td></tr><tr><td><p>Branch sequence</p></td><td><p>1a. The users sends a request to list a specific option identified by its name or all default options values defined by VISHNU administrator</p><p>2a. The System checks the name of the option specified</p><p>2b. The System returns the value of the option specified or all default options values defined by VISHNU administrator</p></td></tr><tr><td><p>Exception sequence</p></td><td><p>2a1. The option name is unknown</p></td></tr></tbody></table></div></div><div class="section" title="U1.3.3 - Change password"><div class="titlepage"><div><div><h3 class="title"><a id="id2827819"></a>U1.3.3 - Change password</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>U1.3.3 - Change password</p></td></tr><tr><td><p>Summary</p></td><td><p>The user changes her password</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td><p>- The password is changed</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The user sends a request containing her old password and the new password</p><p>2. The System checks the old user password and registers the new user password</p><p>3. The System returns an acknowledgment to the user</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>2a. The provided old password does not match the current password</p><p>2b. The provided new password is too short or too long</p></td></tr></tbody></table></div></div><div class="section" title="U1.3.4 - Display session command history"><div class="titlepage"><div><div><h3 class="title"><a id="id2827944"></a>U1.3.4 - Display session command history</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>U1.3.4 - Display session command history</p></td></tr><tr><td><p>Summary</p></td><td><p>The user displays all the commands sent during one session</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td> </td></tr><tr><td><p>Base sequence</p></td><td><p>1. The user sends a request to list all commands sent during the session identified by the session key registered in the user's environment</p><p>2. The System returns the list of all commands issued by the user during the session which key corresponds to the session key registered in the user's environment. Each command has exactly the same format and parameters as the original submission and can be resubmitted as-is to the System</p></td></tr><tr><td><p>Branch sequence</p></td><td><p>1a. The user sends a request containing a session identifier to list all commands sent during the session identified by the session id</p><p>2a. The System returns the list of all commands issued by the user during the session which id corresponds to the provided id</p></td></tr><tr><td><p>Exception sequence</p></td><td><p>1b. Invalid session key (unknown / belonging to another user, if the current user is not an administrator)</p><p>1a1. Invalid session id (unknown / belonging to another user, if the current user is not an administrator)</p></td></tr></tbody></table></div></div><div class="section" title="U1.3.5 - Display sessions log"><div class="titlepage"><div><div><h3 class="title"><a id="id2828080"></a>U1.3.5 - Display sessions log</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>U1.3.5 - Display sessions log</p></td></tr><tr><td><p>Summary</p></td><td><p>The user displays her sessions (active or closed)</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td> </td></tr><tr><td><p>Base sequence</p></td><td><p>1. The user sends a request to list all her active sessions that have an open timestamp within an interval provided by the user (start and finish date)</p><p>2. The System returns all active sessions of the user matching the search criteria with the following information for each session: id, opening date, client host name, closure policy (timeout or disconnect), time before automatic closure (if applicable) and period using start and finish date </p></td></tr><tr><td><p>Branch sequence</p></td><td><p>1a. The user sends a request to list all closed sessions with some optional search criteria</p><p>2a. The System returns all closed sessions of the user matching the search criteria</p><p>1b. The user sents a request to list all sessions with some optional search criteria</p><p>2b. The System returns all sessions of the user matching the search criteria</p></td></tr><tr><td><p>Exception sequence</p></td><td> </td></tr></tbody></table></div></div><div class="section" title="U1.4 - Execute asynchronous user request"><div class="titlepage"><div><div><h3 class="title"><a id="id2828213"></a>U1.4 - Execute asynchronous user request</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>U1.4 - Execute asynchronous user request</p></td></tr><tr><td><p>Summary</p></td><td><p>The user submits an asynchronous request to the system</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td><p>- The user is connected on the client System</p><p>- The user has an open session on the client System</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The request is completed</p><p>-  A request log is created</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The user sends the request to the system</p><p>2. The System returns an acknowledgment to the user</p><p>3. The System runs the request in background</p><p>4. When the request is completed, the system updates the status of the request</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. Invalid session (bad session certificate or session unavailable)</p><p>1b. Invalid request</p><p>1c. Permission denied</p><p>1d. Ressource not available</p><p>1e. VISHNU System crashed</p></td></tr><tr><td><p>Extension of</p></td><td><p>U1 - Session with manual closure</p><p>U2 - Session with automatic closure on timeout</p><p>U3 - Session with automatic closure on disconnect</p></td></tr></tbody></table></div></div><div class="section" title="U1.5 - Reconnect to session"><div class="titlepage"><div><div><h3 class="title"><a id="id2828377"></a>U1.5 - Reconnect to session</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>U1.5 - Reconnect to session</p></td></tr><tr><td><p>Summary</p></td><td><p>The user connects to a session in which she was disconnected previously without closing it</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td><p>- The user is connected on a client host in which VISHNU is installed and that can be connected to the VISHNU infrastructure</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The user is connected to an active session</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. User provides its login, password and the identifier of the session to the System</p><p>2. The System validates the user's login, password and the identifier of the session </p><p>3. The System provides the chosen session key to the user</p></td></tr><tr><td><p>Branch sequence</p></td><td><p>1a. When the login and the password provided are empty, the System will automatically read a vishnu user connection 's parameters (login and  password) on the .netrc file located in the home of the user. A vishnu account is defined on the .netrc with the value vishnu for key machine. If several VISHNU accounts have been defined in the .netrc file, each will be used in the order they appear in the file until one is allowed to reconnect with the corresponding session identifier. </p></td></tr><tr><td><p>Exception sequence</p></td><td><p>cf U1.1 (Open session)</p><p>1a. The .netrc is not found. </p><p>1b. The permission of the .netrc file should be 600</p><p>1c. The machine vishnu os not found</p><p>1d. The login is undefined for the machine vishnu (the password must follow the login).</p><p>1e.  The password is undefined.</p><p>2a. The identifier of the session does not exist</p><p>2b. The identifier relates to a session belonging to another user</p><p>2c. The identifier is for a session closed</p><p>2d. If the user is using the command-line interface and is already connected to a session in the same terminal then this session will remain active but will not be used for the user requests until the new session is closed.</p></td></tr><tr><td><p>Extension of</p></td><td><p>U1 - Session with manual closure</p><p>U2 - Session with automatic closure on timeout</p><p>U3 - Session with automatic closure on disconnect</p></td></tr></tbody></table></div></div><div class="section" title="U2 - Session with automatic closure on timeout"><div class="titlepage"><div><div><h3 class="title"><a id="id2828572"></a>U2 - Session with automatic closure on timeout</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>U2 - Session with automatic closure on timeout</p></td></tr><tr><td><p>Summary</p></td><td><p>The user opens a new session that will be closed by the System after the expiration of the inactivity delay </p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td><p>- VISHNU is installed and running on the client system</p><p>- The client system can be connected to VISHNU</p><p>- The option "Session closure policy" value is "Close on Timeout"</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- A session log has been created</p><p>- The session is closed</p><p>- All user requests submitted during the session are completed</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. U1.1 Open session</p><p>2. The System is ready to process user commands</p><p>3. After inactivity delay has expired: U2.1 Close session auto</p></td></tr><tr><td><p>Branch sequence</p></td><td><p>2a. U1.3 Execute synchronous user request</p><p>2b. U1.4 Execute asynchronous user request</p><p>2c. U1.5 Reconnect to session</p><p>2d. If the user disconnects from the client terminal or the client system crashes or is shutdown, the session remains open and all asynchronous commands that were not completed are kept running</p></td></tr><tr><td><p>Exception sequence</p></td><td><p>see U1  </p></td></tr><tr><td><p>Extensions</p></td><td><p>U1.5 - Reconnect to session</p><p>U1.4 - Execute asynchronous user request</p><p>U1.3 - Execute synchronous user request</p></td></tr></tbody></table></div></div><div class="section" title="U2.1 - Close session auto"><div class="titlepage"><div><div><h3 class="title"><a id="id2828744"></a>U2.1 - Close session auto</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>U2.1 - Close session auto</p></td></tr><tr><td><p>Summary</p></td><td><p>The session is closed by the system</p></td></tr><tr><td><p>Actors</p></td><td> </td></tr><tr><td><p>Precondition</p></td><td><p>- The user is connected on the client system</p><p>- The user has an open session on the client system</p><p>either the inactivity timeout for the session has expired or the user disconnected from its shell session </p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The session is closed</p><p>- The session close event is stored in the system's log</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The system checks if the user has got no running commands (file transfers or tasks)</p><p>2. The system registers session closure</p></td></tr><tr><td><p>Branch sequence</p></td><td><p>1a. If the user has got some running commands, the system does not close the session and reset the inactivity timeout. After this delay is expired, back to step 1.</p></td></tr><tr><td><p>Exception sequence</p></td><td> </td></tr><tr><td><p>Notes</p></td><td><p>This use case defines behaviour(s) that is/are not defined in the project initial requirements.</p></td></tr></tbody></table></div></div><div class="section" title="U3 - Session with automatic closure on disconnect"><div class="titlepage"><div><div><h3 class="title"><a id="id2828889"></a>U3 - Session with automatic closure on disconnect</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>U3 - Session with automatic closure on disconnect</p></td></tr><tr><td><p>Summary</p></td><td><p>The user opens a new session that will be closed by the system after the user disconnects from the client terminal</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td><p>- VISHNU is installed and running on the client system</p><p>- The client system can be connected to VISHNU</p><p>- The option "Session Closure Policy" value is "Close on Disconnect" </p></td></tr><tr><td><p>Postcondition</p></td><td><p>-  A session log has been created</p><p>- The session state is closed</p><p>- All user requests submitted during the session are complete</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. U1.1 Open session</p><p>2. System is ready to process user commands</p><p>3. The user disconnects from the terminal (either by typing an exit command, by closing the window, or by remote disconnection)</p><p>4. U2.1 Close session auto</p></td></tr><tr><td><p>Branch sequence</p></td><td><p>2a. U1.4 Execute synchronous user request</p><p>2b. U1.5 Execute asynchronous user request</p><p>3a. if the client system crashes or is shutdown, go to step 4</p></td></tr><tr><td><p>Exception sequence</p></td><td><p>see U1 </p></td></tr><tr><td><p>Extensions</p></td><td><p>U1.3 - Execute synchronous user request</p><p>U1.5 - Reconnect to session</p><p>U1.4 - Execute asynchronous user request</p></td></tr></tbody></table></div></div><div class="section" title="U4 - Create new local user config"><div class="titlepage"><div><div><h3 class="title"><a id="id2829059"></a>U4 - Create new local user config</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>U4 - Create new local user config</p></td></tr><tr><td><p>Summary</p></td><td><p>The user creates a new local user configuration for a given user on a given machine</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td><p>- The user has an account on VISHNU</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- Local user config is registered</p><p>- An email is sent to the user with a message containing an SSH public key</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The user provides local user configuration information for a given machine (login of the local unix account on this machine, path to home directory of that unix account on this machine) </p><p>2. The System checks the user login and the machine Id</p><p>3. The System generates an ssh private/public key pair</p><p>4. The System sends an email to the user containing the public key and asking the user to add this key to the authorized_keys on the machine</p><p>5. The user updates his/her authorized_keys file on the machine by adding the public key</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>2a. Unknown login</p><p>2b. Unknown machine</p><p>2c. The user already has a local user configuration defined for the machine</p><p>4a. Invalid email address</p></td></tr><tr><td><p>Notes</p></td><td><p>This use case defines behaviour(s) that is/are not defined in the project initial requirements.</p></td></tr></tbody></table></div></div><div class="section" title="U4.1 - Update local user config"><div class="titlepage"><div><div><h3 class="title"><a id="id2829220"></a>U4.1 - Update local user config</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>U4.1 - Update local user config</p></td></tr><tr><td><p>Summary</p></td><td><p>The user updates her local user configuration for a given machine</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td><p>- The user has an account on VISHNU</p><p>- The user has a local user configuration defined for the machine</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The local user configuration is updated</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The user provides the identifier of the machine and information to be updated (login of the local unix account on this machine, path to home directory of that unix account on this machine) </p><p>2. The System checks the local user configuration</p><p>3. The System updates the local user configuration information</p><p>4. The System returns an acknowledgment to the user</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>2a. Unknown login for the given machine</p><p>2b. Unknown machine for the given login</p><p>2c. No existing local configuration</p></td></tr></tbody></table></div></div><div class="section" title="U4.2 - Delete local user config"><div class="titlepage"><div><div><h3 class="title"><a id="id2829359"></a>U4.2 - Delete local user config</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>U4.2 - Delete local user config</p></td></tr><tr><td><p>Summary</p></td><td><p>The user deletes his/her local user configuration on a given machine</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td><p>- The local user configuration exists for the given machine</p><p>- There is no job or file transfer running on the given machine</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The local user configuration for the given machine is deleted</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The user provides the identifier machine of the local user configuration and his/her login</p><p>2. The System checks the identifier of the machine for the given user</p><p>3. The System deletes the local user configuration identified</p><p>4. The System returns an acknowledgment to the user</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>2a. Unknown login for the given machine</p><p>2b. Unknown machine for the given login</p><p>2c. No existing local configuration</p></td></tr></tbody></table></div></div><div class="section" title="U4.3 - Display local user configs"><div class="titlepage"><div><div><h3 class="title"><a id="id2829499"></a>U4.3 - Display local user configs</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>U4.3 - Display local user configs</p></td></tr><tr><td><p>Summary</p></td><td><p>The user displays all of his/her local configurations</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td> </td></tr><tr><td><p>Base sequence</p></td><td><p>1. The user sends a request to list all his/her local configurations </p><p>2. The System returns all local configurations</p></td></tr><tr><td><p>Branch sequence</p></td><td><p>1a. The user sends a request containing the identifier of a machine for listing a specific local user configurations on a specific machine</p></td></tr><tr><td><p>Exception sequence</p></td><td><p>1a1. Unknown machine</p></td></tr></tbody></table></div></div><div class="section" title="U5 - Display user authentication systems"><div class="titlepage"><div><div><h3 class="title"><a id="id2829619"></a>U5 - Display user authentication systems</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>U5 - Display user authentication systems</p></td></tr><tr><td><p>Summary</p></td><td><p>The user displays all user-authentication systems defined in VISHNU</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td> </td></tr><tr><td><p>Base sequence</p></td><td><p>1. The user sends a request to list all user-authentication system in which she/he has a local user-authentification configuration</p><p>2. The System returns all corresponding user-authentication systems </p></td></tr><tr><td><p>Branch sequence</p></td><td><p>1a. The user sends a request to list all user-authentication systems defined in VISHNU</p><p>1b. The administrator sends a request to list all user-authentication system in which a specific user has a local user-authentification config</p></td></tr><tr><td><p>Exception sequence</p></td><td> </td></tr></tbody></table></div></div><div class="section" title="U6 - Create a new local user authentication config"><div class="titlepage"><div><div><h3 class="title"><a id="id2829742"></a>U6 - Create a new local user authentication config</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>U6 - Create a new local user authentication config</p></td></tr><tr><td><p>Summary</p></td><td><p>The user creates a new local user-authentication configuration for a given user on a given user-authentification system</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td><p>The user has an account on VISHNU</p><p>The user has not a local user-authentication config on the given user-authentification system</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- Local user-authentication config is registered</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The user provides the local user-authentication configuration information for a given user-authentication system (login on the local account on this user-authentication system) and the user-authentication system identifier</p><p>2. The System checks the user login (associated to the session key) and the user-authentication system identifier</p><p>3. The System creates the corresponding local user-authentication user configuration</p><p>4. The System returns an acknowledgment to the user</p></td></tr><tr><td><p>Branch sequence</p></td><td><p>1a. An administrator provides the local user-authentication configuration information for a given user on a given authentication system</p><p>2a. The System checks the user login provided by the administrator and the authentication system identifier </p></td></tr><tr><td><p>Exception sequence</p></td><td><p>2a. Unknown user</p><p>2b. Invalid authentification system identifier</p></td></tr></tbody></table></div></div><div class="section" title="U6.1 - Update a local user authentication config"><div class="titlepage"><div><div><h3 class="title"><a id="id2829892"></a>U6.1 - Update a local user authentication config</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>U6.1 - Update a local user authentication config</p></td></tr><tr><td><p>Summary</p></td><td><p>The user updates a local user-authentication configuration in  VISHNU (database)</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td><p>- The user has a VISHNU account</p><p>- The local user-authentication configuration is defined on VISHNU for the given user</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The local user-authentication configuration is updated</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The user provides the identifier of the authentication system and information to be updated (login of the local account on this authentication system) </p><p>2. The System checks the local user-authentication configuration</p><p>3. The System updates the local user-authentication configuration information</p><p>4. The System returns an acknowledgment to the user</p></td></tr><tr><td><p>Branch sequence</p></td><td><p>1a. An administrator provides the identifier of the authentication system and information to be updated (login of the local account on this authentication system)  for a given user</p></td></tr><tr><td><p>Exception sequence</p></td><td><p>2a. Unknown user</p><p>2b. Invalid authentication system identifier</p><p>2c. Unknown local user-authentication config </p></td></tr></tbody></table></div></div><div class="section" title="U6.2 - Delete a local user authentication config"><div class="titlepage"><div><div><h3 class="title"><a id="id2830038"></a>U6.2 - Delete a local user authentication config</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>U6.2 - Delete a local user authentication config</p></td></tr><tr><td><p>Summary</p></td><td><p>The user deletes a local user-authentication configuration</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td><p>- The user has a VISHNU account</p><p>- The local user-authentication configuration is defined on VISHNU for the given user </p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The local user-authentication configuration is no longer in the system</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The user provides the identifier of the authentication system</p><p>2. The System checks the local user-authentication configuration</p><p>3. The System deletes the local user-authentication configuration information</p><p>4. The System returns an acknowledgment to the user</p></td></tr><tr><td><p>Branch sequence</p></td><td><p>1a. An administrator provides the identifier of the authentication system and the login of a specific user</p></td></tr><tr><td><p>Exception sequence</p></td><td><p>2a. Unknown user</p><p>2b. Invalid authentication system identifier</p><p>2c. Unknown local user-authentication config </p></td></tr></tbody></table></div></div><div class="section" title="U6.3 - Display local user authentication configs"><div class="titlepage"><div><div><h3 class="title"><a id="id2830181"></a>U6.3 - Display local user authentication configs</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>U6.3 - Display local user authentication configs</p></td></tr><tr><td><p>Summary</p></td><td><p>The user displays her/his local user-authentication configs</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td> </td></tr><tr><td><p>Base sequence</p></td><td><p>1. The user sends a request to list all of her/his local user-authentication configurations</p><p>2. The System returns all local user-authentication systems for a given user</p></td></tr><tr><td><p>Branch sequence</p></td><td><p>1a. An administrator sends a request to list all local user-authentication configurations of a specific user</p><p>1b. An administrator sends a request to list all local user-authentication configurations of a specific user-authentication system</p><p>1c. An administrator sends a request to list all local user-authentication configurations defined in VISHNU</p></td></tr><tr><td><p>Exception sequence</p></td><td> </td></tr></tbody></table></div></div><div class="section" title="UA1 - Create new user account"><div class="titlepage"><div><div><h3 class="title"><a id="id2830308"></a>UA1 - Create new user account</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>UA1 - Create new user account</p></td></tr><tr><td><p>Summary</p></td><td><p>The administrator creates a new user account in the System (database)</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td><p>- The user does not have an account on VISHNU</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The user account is created in an active state</p><p>- The account's password must be changed at the first connection</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The administrator provides the new user's last name, first name, email address and specifies whether the user has standard or admin rights</p><p>2. The System creates the new user account and initializes the password with a randomly-generated string (temporary password)</p><p>3. The System sends an email to the user containing the temporary password and the user login</p><p>4. The System returns an acknowledgment to the administrator</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>3a. Invalid email address</p></td></tr><tr><td><p>Notes</p></td><td><p>This use case defines behaviour(s) that is/are not defined in the project initial requirements.</p></td></tr></tbody></table></div></div><div class="section" title="UA1.1 - Update user account"><div class="titlepage"><div><div><h3 class="title"><a id="id2830457"></a>UA1.1 - Update user account</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>UA1.1 - Update user account</p></td></tr><tr><td><p>Summary</p></td><td><p>The administrator updates the user account (database)</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td><p>- The user has an account on VISHNU</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The user account is updated</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The administrator provides the user's information changes (firstname, lastname, email, privilege) </p><p>2. The System updates the user account information</p><p>3. The System returns an acknowledgment to the administrator</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1.a Invalid login or login unknown</p><p>1.b The provided parameters are invalid</p></td></tr><tr><td><p>Notes</p></td><td><p>The user identifier is an information that cannot be modified due to integrity constraints.</p></td></tr></tbody></table></div></div><div class="section" title="UA1.2 - Delete user account"><div class="titlepage"><div><div><h3 class="title"><a id="id2830599"></a>UA1.2 - Delete user account</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>UA1.2 - Delete user account</p></td></tr><tr><td><p>Summary</p></td><td><p>The administrator deletes a user account</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td><p>- The user has an account on VISHNU</p><p>- There is no job or file transfer running for the user</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The user account is no longer in the System</p><p>- System does not contain any information related to the user</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The administrator provides a user's login</p><p>2. The System deletes the user account along with all the information (configuration, history) related to it.</p><p>3. The System returns an acknowledgment to the administrator</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. Invalid login (unknown or inactive)</p></td></tr></tbody></table></div></div><div class="section" title="UA1.3 - Lock user account"><div class="titlepage"><div><div><h3 class="title"><a id="id2830731"></a>UA1.3 - Lock user account</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>UA1.3 - Lock user account</p></td></tr><tr><td><p>Summary</p></td><td><p>The administrator locks a user account to remove access to the account without deleting all account information</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td><p>- The user has an account on VISHNU</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The user account is locked</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The administrator provides a user's login</p><p>2. The System changes the status of the user's account to a status where the user cannot connect or send any request to VISHNU. The requests sent before this change and that are still running will not be cancelled.</p><p>3. The System returns an acknowledgment to the administrator</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. Invalid login (unknown or inactive)</p><p>2a. User status is already set to locked</p></td></tr></tbody></table></div></div><div class="section" title="UA2 - Reset user password"><div class="titlepage"><div><div><h3 class="title"><a id="id2830862"></a>UA2 - Reset user password</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>UA2 - Reset user password</p></td></tr><tr><td><p>Summary</p></td><td><p>The administrator resets a user password</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td><p>- The password of the user is temporary and must be changed at the first connection by the user</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The administrator provides a user's login</p><p>2. The System resets the user's password using a randomly-generated string</p><p>3. The System sends an email to the user containing the new temporary password</p><p>4. The System returns an acknowledgment to the administrator</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. Invalid login (unknown or inactive)</p><p>3a. Invalid email address</p></td></tr><tr><td><p>Notes</p></td><td><p>If the user has one or several active sessions when Admin requests the password reset then the sessions are not affected. Only new sessions will require the new password for authentification.</p></td></tr></tbody></table></div></div><div class="section" title="UA3 - Save configuration"><div class="titlepage"><div><div><h3 class="title"><a id="id2831006"></a>UA3 - Save configuration</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>UA3 - Save configuration</p></td></tr><tr><td><p>Summary</p></td><td><p>The administrator saves the configuration of the system</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td><p> </p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The configuration is saved on a file</p><p>- A log information is created</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The administrator requests to save the configuration in a file</p><p>2. The System creates a configuration file containing: the list  of users, the list of local users configs, the list of machines according to the local users configs,  the list of local users authentication configs and the list of user-authentication systems according to the local users authentication configs</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>2a. File creation problems</p><p>2b. VISHNU System crashed</p></td></tr></tbody></table></div></div><div class="section" title="UA4 - Restore configuration"><div class="titlepage"><div><div><h3 class="title"><a id="id2831137"></a>UA4 - Restore configuration</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>UA4 - Restore configuration</p></td></tr><tr><td><p>Summary</p></td><td><p>The administrator restores a saved configuration</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td><p>- All users are disconnected from VISHNU</p><p>- The configuration file was saved using the "save configuration" feature.</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The System is operational on all the machines that are both properly configured in the saved configuration and where the VISHNU processes are running.</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The administrator opens a session as the Root user</p><p>2. The administrator checks that there is no other user/admin connected to VISHNU</p><p>3. The administrator loads the configuration file</p><p>4. The System replaces the current configuration with the loaded configuration.</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. If the Root user already has an open session, the System cannot open a second session with the Root user</p><p>3a. If the configuration file cannot be loaded, the System provides an error message. The System configuration is reset to a basic configuration with only the Root user configured.</p></td></tr><tr><td><p>Notes</p></td><td><p>To avoid failure during this critical operation, the reasons to go for exception 3a should be reduced as much as possible. Therefore inconsistencies between the saved configuration and the real infrastructure will not be considered as blocking for this operation.</p></td></tr></tbody></table></div></div><div class="section" title="UA5.1 - Display sessions"><div class="titlepage"><div><div><h3 class="title"><a id="id2831294"></a>UA5.1 - Display sessions</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>UA5.1 - Display sessions</p></td></tr><tr><td><p>Summary</p></td><td><p>The administrator displays all past and present sessions stored in the database.</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td> </td></tr><tr><td><p>Base sequence</p></td><td><p>1. The administrator sends a request to list all sessions (active and/or closed) that have an open timestamp within an interval provided by the user (start and finish date)</p><p>2. The System returns the list of sessions that match the search criteria and provides detailed information about these sessions (user id, open and close timestamp, client machine id)</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td> </td></tr></tbody></table></div></div><div class="section" title="UA5.2 - Display users"><div class="titlepage"><div><div><h3 class="title"><a id="id2831411"></a>UA5.2 - Display users</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>UA5.2 - Display users</p></td></tr><tr><td><p>Summary</p></td><td><p>The administrator displays the description of all users registered in the database</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td> </td></tr><tr><td><p>Base sequence</p></td><td><p>1. The administrator sends a request to list all users</p><p>2. The System returns all users with the following information for each user: id, firstname, lasname, login, status, email and password state.</p></td></tr><tr><td><p>Branch sequence</p></td><td><p>1a. The administrator sends a request containing the login of a specific user to list information about him/her.</p><p>1b. The administrator sends a request containing the identifier of a specific user-authentication system to list all users of this user-authentication system.</p></td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. The login is unknown</p><p>1b. The user is not an administrator</p><p>1c. The user-authentication system is unknown</p></td></tr></tbody></table></div></div><div class="section" title="UA5.3 - Display local users configs"><div class="titlepage"><div><div><h3 class="title"><a id="id2831544"></a>UA5.3 - Display local users configs</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>UA5.3 - Display local users configs</p></td></tr><tr><td><p>Summary</p></td><td><p>The administrator displays the local user configurations for all users registered in the database</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td> </td></tr><tr><td><p>Base sequence</p></td><td><p>1. The administrator sends a request to list all local users configurations</p><p>2. The System returns all the local users configs for all users </p></td></tr><tr><td><p>Branch sequence</p></td><td><p>1a. The administrator sends a request containing the identifier of a machine for listing all local users configurations on a specific machine</p><p>1b. The administrator sends a request containing the login of one user for listing all local users configurations of a specific user</p></td></tr><tr><td><p>Exception sequence</p></td><td><p>1a1. unknonwn machine</p><p>1b1. unknonwn login</p></td></tr></tbody></table></div></div><div class="section" title="UA6.1 Add a machine"><div class="titlepage"><div><div><h3 class="title"><a id="id2831672"></a>UA6.1 Add a machine</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>UA6.1 Add a machine</p></td></tr><tr><td><p>Summary</p></td><td><p>The administrator registers a new machine in VISHNU</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td><p>A new machine is added in VISHNU System</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The administrator adds a new machine on VISHNU by giving:</p><p>  - The machine name</p><p>  - The machine state (private or accessible to users)</p><p>  - The public IP adress</p><p>  - A structure describing the machine state</p><p>  - A structure describing the network</p><p>2. The machine is added on VISHNU and the System returns the machine id.</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. The machine name already exists</p><p>1b. A machine with the same public adress already exists</p></td></tr></tbody></table></div></div><div class="section" title="UA6.2 Remove a machine"><div class="titlepage"><div><div><h3 class="title"><a id="id2831808"></a>UA6.2 Remove a machine</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>UA6.2 Remove a machine</p></td></tr><tr><td><p>Summary</p></td><td><p>The administrator removes a machine from the list of active machines</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td><p>- The machine is registered in the System and active</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The machine is inactive therefore cannot be used for any VISHNU request</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The administrator provides the machine id</p><p>2. The System checks that there is no running command on the machine</p><p>3. The System set the status of the machine to inactive</p><p>4. The System returns an acknowledgment to the administrator</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. The machine id is unknown</p><p>2a. Some commands are currently running on the machine</p><p>3a. The machine is already in inactive state</p></td></tr></tbody></table></div></div><div class="section" title="UA6.3 Display machines"><div class="titlepage"><div><div><h3 class="title"><a id="id2831944"></a>UA6.3 Display machines</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>UA6.3 Display machines</p></td></tr><tr><td><p>Summary</p></td><td><p>The administrator displays the machines registered in the database</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td> </td></tr><tr><td><p>Base sequence</p></td><td><p>1. The administrator sends a request to list all machines in the database</p><p>2. The System returns all machines in the database </p></td></tr><tr><td><p>Branch sequence</p></td><td><p>1a. The administrator sends a request containing the identifier of a machine to list a specific machine</p><p>1b. The administrator sends a request containing the login of a user to list the machine used by this user</p></td></tr><tr><td><p>Exception sequence</p></td><td><p>1a1. The machine is unknown</p><p>1b1. The login is unknown</p></td></tr></tbody></table></div></div><div class="section" title="UA6.4 Update machines"><div class="titlepage"><div><div><h3 class="title"><a id="id2832070"></a>UA6.4 Update machines</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>UA6.4 Update machines</p></td></tr><tr><td><p>Summary</p></td><td><p>The administrator updates a machine description in the database</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td><p>The database has one more description for the machine or the existing one has been replaced</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The administrator sends a request to add a machine description of a machine, giving the id of the machine, its description and the language the description is in.</p><p>2. The System updates the database adding the machine description</p></td></tr><tr><td><p>Branch sequence</p></td><td><p>2.a The machine already has a description in this language, the description is replaced by the new one</p></td></tr><tr><td><p>Exception sequence</p></td><td><p>1a1. The machine is unknown</p></td></tr></tbody></table></div></div><div class="section" title="UA7 - Configure default option value"><div class="titlepage"><div><div><h3 class="title"><a id="id2832196"></a>UA7 - Configure default option value</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>UA7 - Configure default option value</p></td></tr><tr><td><p>Summary</p></td><td><p>The administrator configures the default value of an option</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td><p>The default value of the option is configured and is applied to all new user requests that do not specify the value of the option. Running commands are not affected by this change.</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The administrator sends a request for modifying the value of an option to the System</p><p>2. The System checks the option name and registers the new default value for the option</p><p>3. System returns an acknowledgment to the administrator</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. VISHNU infrastructure is unreachable or unavailable</p><p>2a. Invalid option name</p><p>2b. Invalid option value</p></td></tr></tbody></table></div></div><div class="section" title="UA8 - Create a new user authentication system"><div class="titlepage"><div><div><h3 class="title"><a id="id2832327"></a>UA8 - Create a new user authentication system</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>UA8 - Create a new user authentication system</p></td></tr><tr><td><p>Summary</p></td><td><p>The administrator creates a new user-authentication system in  VISHNU (database)</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td><p>The user-authentication system has not been already defined in VISHNU</p></td></tr><tr><td><p>Postcondition</p></td><td><p>The user-authentication system is created</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The administrator provides all the parameters required to connect to the user-authentication system: name, host address, connection login, connection password, type of authentication system.</p><p>2. The System creates the user-authentification system in the database and associates it to an identifier.</p><p>3. The System returns an acknowledgment to the administrator.</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. The user-authentication system already exists</p></td></tr></tbody></table></div></div><div class="section" title="UA8.1 - Update a user authentication system"><div class="titlepage"><div><div><h3 class="title"><a id="id2832457"></a>UA8.1 - Update a user authentication system</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>UA8.1 - Update a user authentication system</p></td></tr><tr><td><p>Summary</p></td><td><p>The administrator updates a user-authentication system in  VISHNU (database)</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td><p>The user-authentication system is defined in VISHNU</p></td></tr><tr><td><p>Postcondition</p></td><td><p>The authentication system is updated </p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The administrator provides the user-authentication system's information changes (host address, connection login, connection password, status, type of authentication system)</p><p>2. The system updates the user-authentication system's information</p><p>3. The System returns an acknowledgment to the</p><p>administrator</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. Invalid user-authentification system identifier</p><p>1b. The provided parameters are invalid</p></td></tr></tbody></table></div></div><div class="section" title="UA8.2 - Delete a user authentication system"><div class="titlepage"><div><div><h3 class="title"><a id="id2832590"></a>UA8.2 - Delete a user authentication system</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>UA8.2 - Delete a user authentication system</p></td></tr><tr><td><p>Summary</p></td><td><p>The administrator deletes a user-authentication system</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td><p>The user-authentication system is defined in VISHNU</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The user-authentication system is no longer in the system</p><p>- System does not contain any information related to the  corresponding authentication system such as local user-authentication configs associated</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The administrator provides the user authentification system identifier</p><p>2. The System deletes the user-authentification system along with all the information related to it.</p><p>3. The System returns an acknowledgment to the administrator</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. Invalid user-authentification system identifier</p></td></tr></tbody></table></div></div></div><div class="section" title="Data dictionary"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2832723"></a>Data dictionary</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="bold"><strong>Command</strong></span>: Represents all user requests sent either using the command-line interface or one of the VISHNU APIs.</p></li><li class="listitem"><p><span class="bold"><strong>Configuration</strong></span>: The configuration contains all information about the users and machines registered in the database. It does not contain chronological information about the users or the infrastructure (logs, metrics values)</p></li><li class="listitem"><p><span class="bold"><strong>Inactivity delay</strong></span>: The inactivity delay is the delay in seconds during which no commands are launched within one session.</p></li><li class="listitem"><p><span class="bold"><strong>Local user config</strong></span>: The local user configuration is an object that belongs to a user account and that contains information about the unix account of the user on a specific machine (login, ssh key path, home directory).</p></li><li class="listitem"><p><span class="bold"><strong>Local user-authentification config</strong></span>: The local user-authentication config corresponds to the mapping of an account on a user authentication system in VISHNU.</p></li><li class="listitem"><p><span class="bold"><strong>Manual closure</strong></span>: The Manual closure means that the user uses a command for closing a session.</p></li><li class="listitem"><p><span class="bold"><strong>Option</strong></span>: The option is a parameter of the user account that is not mandatory for user creation. A default value for each option is defined by the administrator. This features can be used by all VISHNU modules (not only UMS). This feature is used in particular to specify which technology is used for a set of VISHNU services (e.g. to use a specific transfer method for file transfers).</p></li><li class="listitem"><p><span class="bold"><strong>Password state</strong></span>: Records the current state of the password of a user: either 'temporary' if the password must be changed next time the user connects to the System, or 'valid' if the password is in a normal state.</p></li><li class="listitem"><p><span class="bold"><strong>Root user</strong></span>: Special user that is pre-configured in the VISHNU system and that has administrator privileges. This user cannot be deleted from the system.</p></li><li class="listitem"><p><span class="bold"><strong>Session</strong></span>: A session is the context in which VISHNU commands are executed (ex: job submission, file transfers). It is created following authentifcation of a user and lasts until it is closed either manually or automatically.</p></li><li class="listitem"><p><span class="bold"><strong>Session Key</strong></span>: The session key is a encrypted string generated by the System for a session. It is registered in an environment variable
in order to avoid systematic authentification</p></li><li class="listitem"><p><span class="bold"><strong>Session closure policy</strong></span>: This is an option which represents the way to close the session. There are two possible values to this option: "Close on timeout" which means that the session will be closed after an inactivity delay, and "Close on disconnect" which means that the session will be closed when the user disconnects from the terminal used to connect to VISHNU.</p></li><li class="listitem"><p><span class="bold"><strong>Session identifier</strong></span>: The session identifier (or session id) is an identifier of a session easy to manipulate by a user compare to the session key</p></li><li class="listitem"><p><span class="bold"><strong>User account </strong></span>: The user account is an object that contains a VISHNU user information.</p></li><li class="listitem"><p><span class="bold"><strong>User authentification system</strong></span>: A user-authentication system is an information system declared in VISHNU in order to extend the UMS database authentication. One example of such a user-authentication system would be an LDAP directory.
It is important to notice that a user authentication can be achieved using the UMS database only, a user-authentication system only, or a combination of the UMS database and a user-authentication systems (with support for different priorities).
</p></li></ul></div></div></div><div class="chapter" title="Chapter 3. Use cases for Tasks Management Service (TMS)"><div class="titlepage"><div><div><h2 class="title"><a id="id2832960"></a>Chapter 3. Use cases for Tasks Management Service (TMS)</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#id2832969">Use case diagrams
</a></span></dt><dd><dl><dt><span class="section"><a href="#id2832975">UC TMS Overview</a></span></dt></dl></dd><dt><span class="section"><a href="#id2833005">Use case descriptions
</a></span></dt><dd><dl><dt><span class="section"><a href="#id2833011">T1 - Asynchronous command on a machine</a></span></dt><dt><span class="section"><a href="#id2833196">T1.1 - Submit a job </a></span></dt><dt><span class="section"><a href="#id2833353">T1.2 Automatic Submit Job</a></span></dt><dt><span class="section"><a href="#id2833512">T2 - Synchronous command on a machine</a></span></dt><dt><span class="section"><a href="#id2833736">T2.1 - Get job information</a></span></dt><dt><span class="section"><a href="#id2833877">T2.2 - Cancel a job</a></span></dt><dt><span class="section"><a href="#id2834040">T2.3 - List job queues</a></span></dt><dt><span class="section"><a href="#id2834177">T2.4 - List jobs</a></span></dt><dt><span class="section"><a href="#id2834319">T2.5 - Get jobs progression</a></span></dt><dt><span class="section"><a href="#id2834485">T2.6 - Get one job outputs </a></span></dt><dt><span class="section"><a href="#id2834648">T2.7 - Get all completed jobs outputs </a></span></dt><dt><span class="section"><a href="#id2834814">T2.8 List Jobs on all machines</a></span></dt><dt><span class="section"><a href="#id2834954">TA3 - Launch TMS Server</a></span></dt><dt><span class="section"><a href="#id2835116">TA4 - Stop TMS Server</a></span></dt></dl></dd><dt><span class="section"><a href="#id2835243">Data dictionary</a></span></dt></dl></div><div class="section" title="Use case diagrams"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2832969"></a>Use case diagrams
</h2></div></div></div><div class="section" title="UC TMS Overview"><div class="titlepage"><div><div><h3 class="title"><a id="id2832975"></a>UC TMS Overview</h3></div></div></div><div class="figure"><a id="id2832981"></a><p class="title"><b>Figure 3.1. UC TMS Overview</b></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/png/UC TMS Overview.png" align="middle" alt="UC TMS Overview" /></div></div></div><br class="figure-break" /></div></div><div class="section" title="Use case descriptions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2833005"></a>Use case descriptions
</h2></div></div></div><div class="section" title="T1 - Asynchronous command on a machine"><div class="titlepage"><div><div><h3 class="title"><a id="id2833011"></a>T1 - Asynchronous command on a machine</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>T1 - Asynchronous command on a machine</p></td></tr><tr><td><p>Summary</p></td><td><p>User starts an asynchronous command on a given machine</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td><p>- User has an active open session</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The command is in active state until completed</p><p>- The system log has been updated and contains the request parameters</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. User sends the request</p><p>2. The System checks that the session key is valid</p><p>3. If the request contains the machine id the System checks that machine id is valid and machine is available</p><p>4. If command parameters contain a file the System verifies that the file is available and readable</p><p>5. The System processes the request</p><p>6. The System returns information to the user</p><p>7. The System records request information (time, user, machine, request parameters) in the system log</p></td></tr><tr><td><p>Branch sequence</p></td><td><p>5a. T1.1</p><p>5b. T1.2</p></td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. The TMS server is unavailable</p><p>   - The system returns an error message that informs the user.</p><p>2a. The session key is invalid</p><p>   - The system returns an error message that informs the user.</p><p>3a. The name of the given machine is unknown</p><p>    -The system returns an error message that informs the user.</p><p>4a. The path to a file parameter is invalid</p><p>   - The system returns an error message that informs user. </p></td></tr><tr><td><p>Extensions</p></td><td><p>T1.2 Automatic Submit Job</p><p>T1.1 - Submit a job </p></td></tr></tbody></table></div></div><div class="section" title="T1.1 - Submit a job"><div class="titlepage"><div><div><h3 class="title"><a id="id2833196"></a>T1.1 - Submit a job </h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>T1.1 - Submit a job </p></td></tr><tr><td><p>Summary</p></td><td><p>User submits a job on a given machine</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td><p>    </p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The job is submitted on the specified machine</p><p>- The job state and id are recorded on the system's log</p><p>- The job id is sent to the user</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The System checks that request parameters contain:</p><p>  - job script path</p><p>  - job options</p><p>2. The TMS server on the given machine is contacted</p><p>3. The job is submitted by the TMS server to the batch scheduler</p><p>4. The id of the submitted job is returned to the user</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. Invalid options or script</p><p>4a. The batch scheduler server is unavailable</p><p>4b. The batch scheduler server rejects the request</p></td></tr><tr><td><p>Extension of</p></td><td><p>T1 - Asynchronous command on a machine</p></td></tr></tbody></table></div></div><div class="section" title="T1.2 Automatic Submit Job"><div class="titlepage"><div><div><h3 class="title"><a id="id2833353"></a>T1.2 Automatic Submit Job</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>T1.2 Automatic Submit Job</p></td></tr><tr><td><p>Summary</p></td><td><p>User asks to submit a job automatically on the best  machine (the used criterion is the minimum number of waiting jobs  or minimum running jobs or minimum total jobs)</p></td></tr><tr><td><p>Actors</p></td><td> </td></tr><tr><td><p>Precondition</p></td><td><p>  - The machine id is equal to autom</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The job is submitted on the best machine (the used criterion is the minimum number of waiting jobs or minimum running jobs or minimum total jobs)</p><p>- The job state and id are recorded on the system's log</p><p>- The job id is sent to the user</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The System checks that request parameters contain:</p><p>  - job script path</p><p>  - job options</p><p>2. The TMS server on the best machine is contacted</p><p>3. The job is submitted by the TMS server to the batch scheduler</p><p>4. The id of the submitted job is returned to the user</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. Invalid options or script</p><p>4a. The batch scheduler server is unavailable</p><p>4b. The batch scheduler server rejects the request</p></td></tr><tr><td><p>Extension of</p></td><td><p>T1 - Asynchronous command on a machine</p></td></tr></tbody></table></div></div><div class="section" title="T2 - Synchronous command on a machine"><div class="titlepage"><div><div><h3 class="title"><a id="id2833512"></a>T2 - Synchronous command on a machine</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>T2 - Synchronous command on a machine</p></td></tr><tr><td><p>Summary</p></td><td><p>User executes a synchronous command on a given machine</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td><p>- User has an active open session</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- Request is in completed state</p><p>- The system log has been updated and contains the request parameters</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The User sends the request with parameters including session key and machine id</p><p>2. The System checks that the session key is valid</p><p>3. If the request contains the machine id the System checks that the machine id is valid and machine is available</p><p>4. If command parameters contain a file the System verifies that the file is available and readable</p><p>5. The System processes the request</p><p>6. The System returns information containing the results of the request</p><p>7. The System records request information (time, user, machine, request parameters) in the system log</p></td></tr><tr><td><p>Branch sequence</p></td><td><p>5a. T2.1</p><p>5b. T2.2</p><p>5c. T2.3</p><p>5d. T2.4</p><p>5e. T2.5</p><p>5f.  T2.6</p><p>5g. T2.7</p><p>5h. T2.8</p><p>5i. TA1</p><p>5j. TA2</p></td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. The TMS server is unavailable</p><p>   - The system returns an error message that informs the user.</p><p>2a. The session key is not valid</p><p>   - The system returns an error message that informs the user.</p><p>3a. The name of the given machine is unknown</p><p>    -The system returns an error message that informs the user.</p><p>4a. The path to a file parameter is invalid</p><p>   - The system returns an error message that informs user. </p><p>   - The user revises the path</p></td></tr><tr><td><p>Extensions</p></td><td><p>T2.1 - Get job information</p><p>T2.2 - Cancel a job</p><p>T2.3 - List job queues</p><p>T2.4 - List jobs</p><p>T2.5 - Get jobs progression</p><p>T2.6 - Get one job outputs </p><p>T2.7 - Get all completed jobs outputs </p><p>T2.8 List Jobs on all machines</p></td></tr></tbody></table></div></div><div class="section" title="T2.1 - Get job information"><div class="titlepage"><div><div><h3 class="title"><a id="id2833736"></a>T2.1 - Get job information</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>T2.1 - Get job information</p></td></tr><tr><td><p>Summary</p></td><td><p>User gets information about a job on a given machine</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td> </td></tr><tr><td><p>Base sequence</p></td><td><p> 1. The Systems checks the job id </p><p> 2. The TMS server on the given machine is contacted</p><p> 3. The TMS server asks job information to the batch scheduler server</p><p> 4. The User receives job information</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. The job id is invalid</p><p>3a. The batch scheduler server is unavailable</p><p>3b. The batch scheduler server rejects the request</p></td></tr><tr><td><p>Extension of</p></td><td><p>T2 - Synchronous command on a machine</p></td></tr></tbody></table></div></div><div class="section" title="T2.2 - Cancel a job"><div class="titlepage"><div><div><h3 class="title"><a id="id2833877"></a>T2.2 - Cancel a job</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>T2.2 - Cancel a job</p></td></tr><tr><td><p>Summary</p></td><td><p>The user cancels a job on a given machine</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td><p>    </p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The job is canceled on the specified machine</p><p>- The job state and id are removed to the system's log</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The System checks the job id</p><p>2. If the User has no admin privilege, the System checks that the User is the submitter of the job</p><p>3. The System cancels the job</p><p>4. The System returns a confirmation to the User</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. The job id is invalid</p><p>  - The System returns an error message</p><p>2a. The User is not the submitter of the job</p><p>  - The System returns an error message</p><p>3a. The batch scheduler server is unavailable</p><p>  - The System returns an error message</p><p>3b. The batch scheduler server rejects the request</p><p>  - The System returns an error message</p></td></tr><tr><td><p>Extension of</p></td><td><p>T2 - Synchronous command on a machine</p></td></tr></tbody></table></div></div><div class="section" title="T2.3 - List job queues"><div class="titlepage"><div><div><h3 class="title"><a id="id2834040"></a>T2.3 - List job queues</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>T2.3 - List job queues</p></td></tr><tr><td><p>Summary</p></td><td><p>User lists all queues or classes of a specific batch scheduler </p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td> </td></tr><tr><td><p>Base sequence</p></td><td><p> 1. The User sends the request with parameters that include the machine id</p><p> 2. The System obtains queues or classes information from the batch scheduler server running on the machine identified by the machine id</p><p> 3. The System returns the list of all queues to the user</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>2a. The batch scheduler server is unavailable</p><p>2b. The batch scheduler server rejects the request</p></td></tr><tr><td><p>Extension of</p></td><td><p>T2 - Synchronous command on a machine</p></td></tr></tbody></table></div></div><div class="section" title="T2.4 - List jobs"><div class="titlepage"><div><div><h3 class="title"><a id="id2834177"></a>T2.4 - List jobs</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>T2.4 - List jobs</p></td></tr><tr><td><p>Summary</p></td><td><p>User lists all jobs submitted on a given machine matching some search criteria</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td><p>    </p></td></tr><tr><td><p>Postcondition</p></td><td> </td></tr><tr><td><p>Base sequence</p></td><td><p> 1. The User sends the request containing the machine id and the following optional search criteria: job id, number of CPUs required for the job, date of submission (from/to), job submitter, status, priority, queue, outputPath and errorPath.</p><p> 2. The System obtains jobs information from the batch scheduler server (depends on the underlying batch scheduler software)</p><p> 3. The System returns jobs information that match the search criteria to the User</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>2a. The batch scheduler server is unavailable</p><p>2b. The batch scheduler server rejects the request</p></td></tr><tr><td><p>Extension of</p></td><td><p>T2 - Synchronous command on a machine</p></td></tr></tbody></table></div></div><div class="section" title="T2.5 - Get jobs progression"><div class="titlepage"><div><div><h3 class="title"><a id="id2834319"></a>T2.5 - Get jobs progression</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>T2.5 - Get jobs progression</p></td></tr><tr><td><p>Summary</p></td><td><p>User gets jobs progression (execution percent) status on a machine</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td> </td></tr><tr><td><p>Base sequence</p></td><td><p>1. The User sends the request containing the machine id</p><p>2. The System computes the job progression for all jobs submitted by the User running on the machine (job progression = 100 * (current_time - run_time) / job_walltime )</p><p>3. The System sends the results to the User</p></td></tr><tr><td><p>Branch sequence</p></td><td><p>1a. The User provides a job id in the request (optional parameter)</p><p>2a. The System computes the job progression for the job corresponding to the job id</p></td></tr><tr><td><p>Exception sequence</p></td><td><p>2b. The TMS server is unavailable</p><p>    - The system returns an error message that informs the user.</p><p>2c. The provided job id is unknown on the machine</p><p>   - The system returns an error message that informs the user.</p></td></tr><tr><td><p>Extension of</p></td><td><p>T2 - Synchronous command on a machine</p></td></tr><tr><td><p>Notes</p></td><td><p>This use case defines behaviour(s) that is/are not defined in the </p><p>project initial requirements.</p></td></tr></tbody></table></div></div><div class="section" title="T2.6 - Get one job outputs"><div class="titlepage"><div><div><h3 class="title"><a id="id2834485"></a>T2.6 - Get one job outputs </h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>T2.6 - Get one job outputs </p></td></tr><tr><td><p>Summary</p></td><td><p>Output files of a given job are downloaded on the client host</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td><p>- The job is removed from the Batch Scheduler's internal database.</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The User sends the request containing the job id</p><p>2. The System checks the job status</p><p>3. The System downloads the job results if the job is completed</p><p>4. The System returns the path for each downloaded file</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>2a. The TMS server is unavailable</p><p>2b. The batch scheduler is unavailable</p><p>2c. The job status is not 'completed'</p><p>     - The System returns a message that informs the user</p></td></tr><tr><td><p>Extension of</p></td><td><p>T2 - Synchronous command on a machine</p></td></tr><tr><td><p>Notes</p></td><td><p>This use case defines behaviour(s) that is/are not defined in the </p><p>project initial requirements.</p></td></tr></tbody></table></div></div><div class="section" title="T2.7 - Get all completed jobs outputs"><div class="titlepage"><div><div><h3 class="title"><a id="id2834648"></a>T2.7 - Get all completed jobs outputs </h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>T2.7 - Get all completed jobs outputs </p></td></tr><tr><td><p>Summary</p></td><td><p>Output files of a user's completed jobs on a given machine are downloaded</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td><p>- All the jobs submitted by the User on the machine are completed</p><p>- All the jobs submitted by the User on the machine are removed from the Batch Scheduler's internal database.</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The User sends the request containing the machine id</p><p>2. The System registers the request</p><p>3. The System checks the running jobs submitted by the User on the machine</p><p>4. The System sends the job outputs for all completed jobs to the client host</p><p>6. The User request is completed</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>2a The TMS server is unavailable</p><p>2b The underlying batch scheduler is unavailable</p></td></tr><tr><td><p>Extension of</p></td><td><p>T2 - Synchronous command on a machine</p></td></tr><tr><td><p>Notes</p></td><td><p>This use case defines behaviour(s) that is/are not defined in the </p><p>project initial requirements.</p></td></tr></tbody></table></div></div><div class="section" title="T2.8 List Jobs on all machines"><div class="titlepage"><div><div><h3 class="title"><a id="id2834814"></a>T2.8 List Jobs on all machines</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>T2.8 List Jobs on all machines</p></td></tr><tr><td><p>Summary</p></td><td><p>User lists all jobs submitted on all machines matching some search criteria</p></td></tr><tr><td><p>Actors</p></td><td> </td></tr><tr><td><p>Precondition</p></td><td><p>-The machine id is equal to all</p></td></tr><tr><td><p>Postcondition</p></td><td> </td></tr><tr><td><p>Base sequence</p></td><td><p> 1. The User sends the request containing  the following optional search criteria: job id, number of CPUs required for the job, date of submission (from/to), job submitter, status, priority, queue, outputPath and errorPath.</p><p> 2. The System obtains jobs information from the batch scheduler server (depends on the underlying batch scheduler software)</p><p> 3. The System returns jobs information that match the search criteria to the User</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>2a. The batch scheduler server is unavailable</p><p>2b. The batch scheduler server rejects the request</p></td></tr><tr><td><p>Extension of</p></td><td><p>T2 - Synchronous command on a machine</p></td></tr></tbody></table></div></div><div class="section" title="TA3 - Launch TMS Server"><div class="titlepage"><div><div><h3 class="title"><a id="id2834954"></a>TA3 - Launch TMS Server</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>TA3 - Launch TMS Server</p></td></tr><tr><td><p>Summary</p></td><td><p>The administrator launches the VISHNU TMS server on a given machine</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td><p>- The Vishnu server software (TMS Module and dependencies) is installed on the machine</p><p>- The machine is configured in the Vishnu system database</p><p>- The batch scheduler processes are up and running on the same machine</p><p>- The network connection between the machine and the Vishnu database server is up and running</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The TMS server is up and running</p><p>- A server log has been created</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The Admin connects to the machine as vishnu user</p><p>2. The Admin updates the Vishnu configuration if necessary (database server hostname and credentials, SysferaDS configuration, Batch scheduler configuration)</p><p>3. The Admin launches the Vishnu TMS Server executable</p><p>4. The System checks the connections to its peers within the Vishnu platform</p><p>5. The System retrieves the list of active jobs (not completed jobs) that were launched on the same machine</p><p>6. The System checks that all the active jobs (from previous step) are still running on the batch scheduler, and eventually updates the job status (for ex. from waiting to running, or from running to finished)</p><p>7. The System returns a status message to the administrator</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>4a. A connection to a Vishnu peer is down. System returns an error message and stops</p><p>6a. The batch scheduler does not recognize some job ids. In this case the System updates the job status to completed.</p></td></tr></tbody></table></div></div><div class="section" title="TA4 - Stop TMS Server"><div class="titlepage"><div><div><h3 class="title"><a id="id2835116"></a>TA4 - Stop TMS Server</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>TA4 - Stop TMS Server</p></td></tr><tr><td><p>Summary</p></td><td><p>The administrator stops the VISHNU TMS server on a given machine</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td><p>- The TMS Server is up and running on the given machine</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The TMS Server is down</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. The Admin sends a request to stop the TMS Server and provides the machine id</p><p>2. The System updates the status of all active user requests (non-completed jobs)</p><p>3. The System stops all internal processes on the machine</p><p>4. The System returns an information message to the Admin</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td> </td></tr></tbody></table></div></div></div><div class="section" title="Data dictionary"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2835243"></a>Data dictionary</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="bold"><strong>Batch Scheduler</strong></span>: A batch scheduler is  a distributed resource manager that enables to allocate at best  the resources to the jobs on a machine according to user needs (the needs are specified by the user by batch directives (batch options) in file or command line).</p></li><li class="listitem"><p><span class="bold"><strong>Job</strong></span>: A job is a sequence of instructions (included batch scheduler directives) written to be launched  by a specified batch scheduler.</p></li><li class="listitem"><p><span class="bold"><strong>Job id</strong></span>: A job id allows to identifie the job in the batch scheduler system.</p></li><li class="listitem"><p><span class="bold"><strong>Job path</strong></span>: A jobPath is the path to the file (script) containing the instructions (batch directives or job characteristics, job execution command) of the job.</p></li><li class="listitem"><p><span class="bold"><strong>Job state</strong></span>: A job state allows to know the progression of the job. It may  have the following state : RUNNING, WAITING, COMPLETED, QUEUED, CANCELED, FAILED</p></li><li class="listitem"><p><span class="bold"><strong>Job walltime</strong></span>: The maximum duration of a job as defined in the job submission parameters</p></li><li class="listitem"><p><span class="bold"><strong>Queue or Class</strong></span>:  A queue or class associates the resource limits (CPU wallclock time, CPU memory) and execution priorities of the jobs.</p></li></ul></div></div></div><div class="chapter" title="Chapter 4. Use cases for Information Management Service (IMS)"><div class="titlepage"><div><div><h2 class="title"><a id="id2835349"></a>Chapter 4. Use cases for Information Management Service (IMS)</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#id2835359">Use case diagrams
</a></span></dt><dd><dl><dt><span class="section"><a href="#id2835365">UC IMS Global functionalities</a></span></dt><dt><span class="section"><a href="#id2835399">UC IMS Consult</a></span></dt><dt><span class="section"><a href="#id2835431">UC IMS Replay</a></span></dt><dt><span class="section"><a href="#id2835465">UC IMS Platform management</a></span></dt><dt><span class="section"><a href="#id2835499">UC IMS Stop Restart</a></span></dt></dl></dd><dt><span class="section"><a href="#id2835533">Use case descriptions
</a></span></dt><dd><dl><dt><span class="section"><a href="#id2835539">I1. Get the update frequency</a></span></dt><dt><span class="section"><a href="#id2835656">I2 Get metric data</a></span></dt><dt><span class="section"><a href="#id2835779">I3. Export and replay commands</a></span></dt><dt><span class="section"><a href="#id2835910">I4. Get data on the infrastructure</a></span></dt><dt><span class="section"><a href="#id2836029">I5. Get system info</a></span></dt><dt><span class="section"><a href="#id2836163">IA1. Get the running processes</a></span></dt><dt><span class="section"><a href="#id2836280">IA2. Define a system load threshold</a></span></dt><dt><span class="section"><a href="#id2836424">IA2.1 Get a system load threshold</a></span></dt><dt><span class="section"><a href="#id2836545">IA3. Define the identifiers</a></span></dt><dt><span class="section"><a href="#id2836704">IA4.1 Hard load shedding </a></span></dt><dt><span class="section"><a href="#id2836833">IA4.2 Soft load shedding</a></span></dt><dt><span class="section"><a href="#id2836957">IA5. Set system info</a></span></dt><dt><span class="section"><a href="#id2837082">IA6. Set the update frequency</a></span></dt><dt><span class="section"><a href="#id2837202">IA7. Notification of limit overflow</a></span></dt><dt><span class="section"><a href="#id2837326">IA8. Restart the System</a></span></dt><dt><span class="section"><a href="#id2837459">IA9. Restart</a></span></dt><dt><span class="section"><a href="#id2837585">U1.3 Execute synchronous request</a></span></dt></dl></dd><dt><span class="section"><a href="#id2837706">Data dictionary</a></span></dt></dl></div><div class="section" title="Use case diagrams"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2835359"></a>Use case diagrams
</h2></div></div></div><div class="section" title="UC IMS Global functionalities"><div class="titlepage"><div><div><h3 class="title"><a id="id2835365"></a>UC IMS Global functionalities</h3></div></div></div><p>Global use case presenting all the IMS use case</p><div class="figure"><a id="id2835375"></a><p class="title"><b>Figure 4.1. UC IMS Global functionalities</b></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/png/UC IMS Global functionalities.png" align="middle" alt="UC IMS Global functionalities" /></div></div></div><br class="figure-break" /></div><div class="section" title="UC IMS Consult"><div class="titlepage"><div><div><h3 class="title"><a id="id2835399"></a>UC IMS Consult</h3></div></div></div><p>User consult use case</p><div class="figure"><a id="id2835408"></a><p class="title"><b>Figure 4.2. UC IMS Consult</b></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/png/UC IMS Consult.png" align="middle" alt="UC IMS Consult" /></div></div></div><br class="figure-break" /></div><div class="section" title="UC IMS Replay"><div class="titlepage"><div><div><h3 class="title"><a id="id2835431"></a>UC IMS Replay</h3></div></div></div><p>A user can replay its old commands of a session</p><div class="figure"><a id="id2835441"></a><p class="title"><b>Figure 4.3. UC IMS Replay</b></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/png/UC IMS Replay.png" align="middle" alt="UC IMS Replay" /></div></div></div><br class="figure-break" /></div><div class="section" title="UC IMS Platform management"><div class="titlepage"><div><div><h3 class="title"><a id="id2835465"></a>UC IMS Platform management</h3></div></div></div><p>All the use case of the administrator concerning the platform management</p><div class="figure"><a id="id2835475"></a><p class="title"><b>Figure 4.4. UC IMS Platform management</b></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/png/UC IMS Platform management.png" align="middle" alt="UC IMS Platform management" /></div></div></div><br class="figure-break" /></div><div class="section" title="UC IMS Stop Restart"><div class="titlepage"><div><div><h3 class="title"><a id="id2835499"></a>UC IMS Stop Restart</h3></div></div></div><p>The administrator use cases concerning the stop and restart of the platform</p><div class="figure"><a id="id2835509"></a><p class="title"><b>Figure 4.5. UC IMS Stop Restart</b></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/png/UC IMS Stop_Restart.png" align="middle" alt="UC IMS Stop Restart" /></div></div></div><br class="figure-break" /></div></div><div class="section" title="Use case descriptions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2835533"></a>Use case descriptions
</h2></div></div></div><div class="section" title="I1. Get the update frequency"><div class="titlepage"><div><div><h3 class="title"><a id="id2835539"></a>I1. Get the update frequency</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>I1. Get the update frequency</p></td></tr><tr><td><p>Summary</p></td><td><p>The user gets how often the IMS database tables are updated</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td> </td></tr><tr><td><p>Base sequence</p></td><td><p>1) The user calls the function to know how often the IMS database tables are automatically updated</p><p>2) The System returns the value in second</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>2 -&gt; There is a problem with the database, the system returns a DATABASE_ERROR</p></td></tr></tbody></table></div></div><div class="section" title="I2 Get metric data"><div class="titlepage"><div><div><h3 class="title"><a id="id2835656"></a>I2 Get metric data</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>I2 Get metric data</p></td></tr><tr><td><p>Summary</p></td><td><p>The user gets data concerning the evolution of a metrics on a machine</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td> </td></tr><tr><td><p>Base sequence</p></td><td><p>1) The user calls to get the metrics data on a machine identified by a machine id, for a metric type, from start time up to end time. The metrics are within {number of cpu, percentage of cpu used, total diskSpace, free diskSpace, total RAM, free RAM}</p><p>2) The System returns the results by groups (metric,value, time).</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1 -&gt; The machine id is invalid, an INVALID_PARAMETER error is returned</p><p>2 -&gt; There is a problem with the database, the system returns a DATABASE_ERROR</p></td></tr></tbody></table></div></div><div class="section" title="I3. Export and replay commands"><div class="titlepage"><div><div><h3 class="title"><a id="id2835779"></a>I3. Export and replay commands</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>I3. Export and replay commands</p></td></tr><tr><td><p>Summary</p></td><td><p>The user exports and replays a sequence of commands made during a session.</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td><p>All the System commands submitted during a session have been re-executed keeping the same order they had when they were originally launched.</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1a) The user calls to export the history, in shell format, of a session identified by an id.</p><p>2a) The System provides a shell script containing all the commands of the session with the same parameters as provided initially by the user (including file paths, numbers, strings, options)</p><p>3a) The user executes the shell script in a shell</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1 -&gt; The session id is invalid, an INVALID_PARAMETER exception is raised.</p><p>3 -&gt; A command in the execution fails, the error of the command is returned</p></td></tr></tbody></table></div></div><div class="section" title="I4. Get data on the infrastructure"><div class="titlepage"><div><div><h3 class="title"><a id="id2835910"></a>I4. Get data on the infrastructure</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>I4. Get data on the infrastructure</p></td></tr><tr><td><p>Summary</p></td><td><p>The user gets current System information about the machines</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td> </td></tr><tr><td><p>Base sequence</p></td><td><p>1) The user calls to get a current data about a machine identified by an ID. The data is within {use of cpu, number of cpu, total diskSpace, free diskSpace, total RAM, free RAM}.</p><p>2) The System returns the value of the data. In the use of cpu case, the value is in percentage.</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>The machine id is invalid, an INVALID_PARAMETER exception is raised</p></td></tr></tbody></table></div></div><div class="section" title="I5. Get system info"><div class="titlepage"><div><div><h3 class="title"><a id="id2836029"></a>I5. Get system info</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>I5. Get system info</p></td></tr><tr><td><p>Summary</p></td><td><p>To get information on the system</p></td></tr><tr><td><p>Actors</p></td><td> </td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td> </td></tr><tr><td><p>Base sequence</p></td><td><p>1) The user calls to get the information about a machine given the id of the machine</p><p>2) The System gets the technical description of the machine (memory max, ram rax) from the database</p><p>3) The System returns these data to the user</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1b) The machine id is invalid: an INVALID_PARAMETER error is returned</p><p>2b) The database is unavailable, a DATABASE_ERROR is returned</p></td></tr><tr><td><p>Extensions</p></td><td><p>U1.3 Execute synchronous request</p></td></tr></tbody></table></div></div><div class="section" title="IA1. Get the running processes"><div class="titlepage"><div><div><h3 class="title"><a id="id2836163"></a>IA1. Get the running processes</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>IA1. Get the running processes</p></td></tr><tr><td><p>Summary</p></td><td><p>The admin gets the list of the running Vishnu processes on a machine</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td> </td></tr><tr><td><p>Base sequence</p></td><td><p>1) The admin calls to get the list of the processes on a machine referenced by a machine id</p><p>2) The System returns a list of Vishnu processes</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1 -&gt; machineId is invalid, an INVALID_PARAMETER is return.</p></td></tr></tbody></table></div></div><div class="section" title="IA2. Define a system load threshold"><div class="titlepage"><div><div><h3 class="title"><a id="id2836280"></a>IA2. Define a system load threshold</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>IA2. Define a system load threshold</p></td></tr><tr><td><p>Summary</p></td><td><p>The administrator defines a system load threshold for a machine</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td><p>The system load threshold is added to the System database</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1a) The administrator calls to define the limit size of the diskSpace to use with a machine id, a threshold value and an admin id (admin responsible for the threshold)</p><p>2a) The System updates the database</p></td></tr><tr><td><p>Branch sequence</p></td><td><p>1b) The administrator calls to define the limit of RAM available to he user with a machine id, a threshold value and an admin id (admin responsible for the threshold)</p><p>2b) The System updates the database</p><p>------------------------</p><p>1c) The administrator calls to define the use of CPU threshold on a machine with a machine id, a treshold value and an admin id (admin responsible for the threshold)</p><p>2c) The System updates the database</p></td></tr><tr><td><p>Exception sequence</p></td><td><p>1* -&gt; The admin ID is invalid, the database is not updated and an INVALID_PARAMETER error is returned</p><p>2* -&gt; The modification of the database fails, a DATABASE_ERROR is returned.</p></td></tr></tbody></table></div></div><div class="section" title="IA2.1 Get a system load threshold"><div class="titlepage"><div><div><h3 class="title"><a id="id2836424"></a>IA2.1 Get a system load threshold</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>IA2.1 Get a system load threshold</p></td></tr><tr><td><p>Summary</p></td><td><p>The admin wants to get the thresholds on a machine</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td> </td></tr><tr><td><p>Base sequence</p></td><td><p>1) The admin calls to get the defined limit on a machine identified by an id. These thresholds are within {free diskSpace,  free RAM, percentage of CPU used}</p><p>2) The System returns the value.</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1 -&gt; The machine id is invalid, the user gets an INVALID_PARAMETER error returned</p><p>2 -&gt; There is a problem with the database request, a DATABASE_ERROR is returned</p></td></tr></tbody></table></div></div><div class="section" title="IA3. Define the identifiers"><div class="titlepage"><div><div><h3 class="title"><a id="id2836545"></a>IA3. Define the identifiers</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>IA3. Define the identifiers</p></td></tr><tr><td><p>Summary</p></td><td><p>The administrator defines the format of the automatic identifiers for the System objects.</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td><p>A new format will be used to create the new identifiers</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1) The administrator has a list of variables to define the identifiers shape. He has a method by kind of object (an object is either a user or a machine or a task or a file transfer).</p><p>Available variables are :</p><p>  YEAR: the last two digits, (e.g. 10 for 2010)</p><p>  MONTH: Numerical value of the month (from 1 to 12)</p><p>  DAY: Day number, from 1 to 31</p><p>  TYPE: The object kind</p><p>  SITE: The place for machine/users</p><p>  NAME: Username or machine name</p><p>  CPT: A counter automatically increased (each kind of object has its counter).</p><p>2) He calls the function to redefine the format with some of the previous parameters in a string. A variable must be preceded by a '$' symbol. For example, "$TYPE$DAY$MONTH$YEAR$CPT"</p><p>3) The System database is updated, the System does not check if the given format creates unique identifiers. If the same identifier is created, it will corrupt the database (the key will not be unique)</p></td></tr><tr><td><p>Branch sequence</p></td><td><p>2 -&gt; An invalid variable is given, an INVALID_PARAMETER is returned and the old format is still used</p><p>3 -&gt; The update fails, a DATABASE_ERROR is returned</p></td></tr><tr><td><p>Exception sequence</p></td><td> </td></tr></tbody></table></div></div><div class="section" title="IA4.1 Hard load shedding"><div class="titlepage"><div><div><h3 class="title"><a id="id2836704"></a>IA4.1 Hard load shedding </h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>IA4.1 Hard load shedding </p></td></tr><tr><td><p>Summary</p></td><td><p>Abruptly stops the processes running on a machine (the waiting actions are cancelled and the running ones are stopped). The processes cannot be automatically restarted.</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td><p>Processes are running on the System</p></td></tr><tr><td><p>Postcondition</p></td><td><p>The whole machine is flushed and no job is running on it</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1) The admin launches the hard load shedding command on a machine identified by an id.</p><p>2) The System flushes all the waiting action.</p><p>3) The System stops all the running processes on this machine. These processes cannot be restarted.</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1 -&gt; The id of the machine is invalid, an INVALID_PARAMETER is returned</p></td></tr></tbody></table></div></div><div class="section" title="IA4.2 Soft load shedding"><div class="titlepage"><div><div><h3 class="title"><a id="id2836833"></a>IA4.2 Soft load shedding</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>IA4.2 Soft load shedding</p></td></tr><tr><td><p>Summary</p></td><td><p>The admin purges all the waiting actions and stops the running ones. The stopped actions can be restarted later.</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td><p>Processes are running on the VISHNU system</p></td></tr><tr><td><p>Postcondition</p></td><td><p>No jobs are waiting to run or are running</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1) The admin calls the soft load shedding command on a machine identified by an id.</p><p>2) The System flushes the waiting jobs and stops the running ones. They are stored and can be restarted later </p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1 -&gt; The machine id is invalid, an INVALID_PARAMETER error is returned</p></td></tr></tbody></table></div></div><div class="section" title="IA5. Set system info"><div class="titlepage"><div><div><h3 class="title"><a id="id2836957"></a>IA5. Set system info</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>IA5. Set system info</p></td></tr><tr><td><p>Summary</p></td><td><p>Updates the data in the system concerning a machine (e.g., if the machine has some added memory diskSpace, some added memory)</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td><p>The description of the machine in the database is updated</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1) An admin calls to update the data concerning a machine identified by an id giving a new diskSpace size or a new memory size.</p><p>2) The System updates the database</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1 -&gt; The machine id is invalid, an INVALID_PARAMETER error is returned</p><p>2 -&gt; There is an error with the database, a DATABASE_ERROR error is returned</p></td></tr></tbody></table></div></div><div class="section" title="IA6. Set the update frequency"><div class="titlepage"><div><div><h3 class="title"><a id="id2837082"></a>IA6. Set the update frequency</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>IA6. Set the update frequency</p></td></tr><tr><td><p>Summary</p></td><td><p>The administrator sets the update frequency</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td><p>The System updates the IMS database at the new frequency</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1) The administrator calls to set the update frequency in seconds</p><p>2) The System updates its database update frequency value</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>The database is is not reachable. A DATABASE_ERROR is returned.</p></td></tr></tbody></table></div></div><div class="section" title="IA7. Notification of limit overflow"><div class="titlepage"><div><div><h3 class="title"><a id="id2837202"></a>IA7. Notification of limit overflow</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>IA7. Notification of limit overflow</p></td></tr><tr><td><p>Summary</p></td><td><p>The admin is notified a limit overflow</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td><p>A machine on the System has a limit overflow</p></td></tr><tr><td><p>Postcondition</p></td><td> </td></tr><tr><td><p>Base sequence</p></td><td><p>1) The System gets the email adress of the admin to contact, using a config file to send the e-mail</p><p>2) The System sends a mail to the admin concerning the overflow. The mail contains the name of the machine and the concerned threshold.</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1 -&gt; The system fails getting the admin e-mail, a DATABASE_ERROR error is returned</p><p>2 -&gt; Sending the mail fails, a MAIL_ERROR error is returned.</p></td></tr></tbody></table></div></div><div class="section" title="IA8. Restart the System"><div class="titlepage"><div><div><h3 class="title"><a id="id2837326"></a>IA8. Restart the System</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>IA8. Restart the System</p></td></tr><tr><td><p>Summary</p></td><td><p>Restart all the servers, agents, and daemons of the System. The running actions are restarted.</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td><p>The System platform needs to be restarted</p></td></tr><tr><td><p>Postcondition</p></td><td><p>The System is running with the same servers, agents and daemons as defined in the deployement file. The interrupted actions that can be restarted are restarted from the beginning.</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1) An admin detects a problem</p><p>2) An admin calls to restart the System with a deployement file</p><p>3) The System saves the current actions</p><p>4) The System restarts components following the deployement file guidance and restarts the stopped actions from the beginning</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>4-&gt; Fail to relaunch a component (server, daemon, agent), an UNREACHABLE_COMPONENT error is returned.</p></td></tr></tbody></table></div></div><div class="section" title="IA9. Restart"><div class="titlepage"><div><div><h3 class="title"><a id="id2837459"></a>IA9. Restart</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>IA9. Restart</p></td></tr><tr><td><p>Summary</p></td><td><p>A component is restarted</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td><p>A component of the platform is down</p></td></tr><tr><td><p>Postcondition</p></td><td><p>The component is up and running again</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1) An admin detects that a component has stopped for unknown reasons (a component = server, daemon, agent)</p><p>2) The admin calls the System to relaunch the component with its name, the machine to relaunch it and the configuration file to use</p><p>3) The System relauches the component</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>3-&gt; Fail to restart the component, an UNREACHABLE_COMPONENT error is returned.</p></td></tr></tbody></table></div></div><div class="section" title="U1.3 Execute synchronous request"><div class="titlepage"><div><div><h3 class="title"><a id="id2837585"></a>U1.3 Execute synchronous request</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>U1.3 Execute synchronous request</p></td></tr><tr><td><p>Summary</p></td><td><p>The user submits a synchronous request to the System. c.f. the UMS use case description (U1.3)</p></td></tr><tr><td><p>Actors</p></td><td><p>User, Admin</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td> </td></tr><tr><td><p>Base sequence</p></td><td> </td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td> </td></tr><tr><td><p>Extension of</p></td><td><p>I5. Get system info</p></td></tr></tbody></table></div></div></div><div class="section" title="Data dictionary"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2837706"></a>Data dictionary</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="bold"><strong>Actions</strong></span>: A generic naming to design both jobs and file transfers.</p></li><li class="listitem"><p><span class="bold"><strong>Agent</strong></span>: A component of the VISHNU hierarchy.</p></li><li class="listitem"><p><span class="bold"><strong>CPU</strong></span>: Central Processing Unit.</p></li><li class="listitem"><p><span class="bold"><strong>Daemon</strong></span>: Daemon running on the machines.</p></li><li class="listitem"><p><span class="bold"><strong>DiskSpace</strong></span>: File system memory (not volatile).</p></li><li class="listitem"><p><span class="bold"><strong>IMS</strong></span>: Information Management System.</p></li><li class="listitem"><p><span class="bold"><strong>Infrastructure</strong></span>: Contains all the machines directly under the System supervision.</p></li><li class="listitem"><p><span class="bold"><strong>Live measure</strong></span>: Measure regularly updated.</p></li><li class="listitem"><p><span class="bold"><strong>Memory</strong></span>: RAM (Random Access Memory, volatile).</p></li><li class="listitem"><p><span class="bold"><strong>Objects</strong></span>: An object is an abstraction of what can be manipulated by the System (user, machine, task, file transfer).</p></li><li class="listitem"><p><span class="bold"><strong>Process</strong></span>: Process of the system.</p></li><li class="listitem"><p><span class="bold"><strong>SeD</strong></span>: A component of the VISHNU hierarchy executing jobs for the clients.</p></li><li class="listitem"><p><span class="bold"><strong>Task</strong></span>: Job submited via the TMS module.</p></li></ul></div></div></div><div class="chapter" title="Chapter 5. Use cases for File Management Service (FMS)"><div class="titlepage"><div><div><h2 class="title"><a id="id2837873"></a>Chapter 5. Use cases for File Management Service (FMS)</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#id2837883">Use case diagrams
</a></span></dt><dd><dl><dt><span class="section"><a href="#id2837888">UC FMS simple command use cases</a></span></dt><dt><span class="section"><a href="#id2837918">UC FMS transfer command use cases</a></span></dt></dl></dd><dt><span class="section"><a href="#id2837949">Use case descriptions
</a></span></dt><dd><dl><dt><span class="section"><a href="#id2837955">F1- Execute simple command on a remote host</a></span></dt><dt><span class="section"><a href="#id2838149">F1.CH1- Change access rights of files</a></span></dt><dt><span class="section"><a href="#id2838296">F1.CH2- Change group owner of files</a></span></dt><dt><span class="section"><a href="#id2838443">F1.CR1- Create new files</a></span></dt><dt><span class="section"><a href="#id2838588">F1.CR2- Create new directories</a></span></dt><dt><span class="section"><a href="#id2838735">F1.DE1- Delete files</a></span></dt><dt><span class="section"><a href="#id2838883">F1.DE2-  Delete directories</a></span></dt><dt><span class="section"><a href="#id2839032">F1.DI1- Display Head of files</a></span></dt><dt><span class="section"><a href="#id2839182">F1.DI2- Display tail of files</a></span></dt><dt><span class="section"><a href="#id2839330">F1.DI3- Display contents of files</a></span></dt><dt><span class="section"><a href="#id2839479">F1.DI4- Display contents of directories</a></span></dt><dt><span class="section"><a href="#id2839632">F1.DI5- Get information about remote files</a></span></dt><dt><span class="section"><a href="#id2839786">F2.CA1- Cancel  files tranfers</a></span></dt><dt><span class="section"><a href="#id2839944">F2.CA2- Cancel all users file transfers</a></span></dt><dt><span class="section"><a href="#id2840103">F2.CP1- Execute a synchronous copy of files </a></span></dt><dt><span class="section"><a href="#id2840314">F2.CP2- Execute an asynchronous copy of files </a></span></dt><dt><span class="section"><a href="#id2840527">F2.LS1- List file transfer status</a></span></dt><dt><span class="section"><a href="#id2840696">F2.LS2- List all users file transfer status</a></span></dt><dt><span class="section"><a href="#id2840873">F2.LT1- List all file transfer  </a></span></dt><dt><span class="section"><a href="#id2841035">F2.LT2- List all users file transfer  </a></span></dt><dt><span class="section"><a href="#id2841205">F2.MV1- Execute a synchronous move of files</a></span></dt><dt><span class="section"><a href="#id2841411">F2.MV2- Execute an asynchronous move of files</a></span></dt><dt><span class="section"><a href="#id2841626">F3. Launch FMS server</a></span></dt><dt><span class="section"><a href="#id2841783">F4. Stop FMS server</a></span></dt></dl></dd><dt><span class="section"><a href="#id2841910">Data dictionary</a></span></dt></dl></div><div class="section" title="Use case diagrams"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2837883"></a>Use case diagrams
</h2></div></div></div><div class="section" title="UC FMS simple command use cases"><div class="titlepage"><div><div><h3 class="title"><a id="id2837888"></a>UC FMS simple command use cases</h3></div></div></div><div class="figure"><a id="id2837894"></a><p class="title"><b>Figure 5.1. UC FMS simple command use cases</b></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/png/UC FMS simple command use cases.png" align="middle" alt="UC FMS simple command use cases" /></div></div></div><br class="figure-break" /></div><div class="section" title="UC FMS transfer command use cases"><div class="titlepage"><div><div><h3 class="title"><a id="id2837918"></a>UC FMS transfer command use cases</h3></div></div></div><div class="figure"><a id="id2837924"></a><p class="title"><b>Figure 5.2. UC FMS transfer command use cases</b></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/png/UC FMS transfer command use cases.png" align="middle" alt="UC FMS transfer command use cases" /></div></div></div><br class="figure-break" /></div></div><div class="section" title="Use case descriptions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2837949"></a>Use case descriptions
</h2></div></div></div><div class="section" title="F1- Execute simple command on a remote host"><div class="titlepage"><div><div><h3 class="title"><a id="id2837955"></a>F1- Execute simple command on a remote host</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>F1- Execute simple command on a remote host</p></td></tr><tr><td><p>Summary</p></td><td><p>This use case allows User to execute a command on a remote host. </p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td><p>- User has an active open session.</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The command is performed succesfully  and the potential results are sent back to User.</p><p>- The log System  has been updated and contains request parameters.</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. User enters the command by specifying the parameters, the session key  and the involved host id. </p><p>2. The System checks that the session key is valid.</p><p>3. The System checks that the host id is valid and  the machine is available.  </p><p>4. The System performs the command and send back the results to User .</p><p>5. The System records request information (time, User, machine, request parameters).</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. The given parameters are invalid for this command.</p><p>2a. The specified session key is invalid. </p><p>3a.  The specified host is unknown. </p><p>3b. The specified host is unavailable.</p><p>4a. The command fails and an error message is displayed on the standard output of the client System.</p></td></tr><tr><td><p>Extensions</p></td><td><p>F1.CH2- Change group owner of files</p><p>F1.CH1- Change access rights of files</p><p>F1.CR2- Create new directories</p><p>F1.DE2-  Delete directories</p><p>F1.DE1- Delete files</p><p>F1.DI3- Display contents of files</p><p>F1.DI1- Display Head of files</p><p>F1.DI4- Display contents of directories</p><p>F1.DI2- Display tail of files</p><p>F1.DI5- Get information about remote files</p><p>F1.CR1- Create new files</p><p>F1.DE1- Delete files</p></td></tr></tbody></table></div></div><div class="section" title="F1.CH1- Change access rights of files"><div class="titlepage"><div><div><h3 class="title"><a id="id2838149"></a>F1.CH1- Change access rights of files</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>F1.CH1- Change access rights of files</p></td></tr><tr><td><p>Summary</p></td><td><p>This use case allows User to change access rights of a given remote file. It is the equivalent of the "chmod" bash command. </p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td><p>The new access permissions of the specified file is set.</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. User submits the change access rights command with the file, the new access rights to set, the involved host.</p><p>2. The System sets the new access rights to the file. </p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. If there are missing parameters, a message that contains the way to use the command, an error message  is returned.</p><p>1b. If a file is unknown, an error message is displayed on the standard output of the client System.</p><p>1c. If User does not have execute permission in a parent    directory or if User is not the file owner or Admin,  a permission denied message is displayed on the standard output of the client System..</p></td></tr><tr><td><p>Extension of</p></td><td><p>F1- Execute simple command on a remote host</p></td></tr></tbody></table></div></div><div class="section" title="F1.CH2- Change group owner of files"><div class="titlepage"><div><div><h3 class="title"><a id="id2838296"></a>F1.CH2- Change group owner of files</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>F1.CH2- Change group owner of files</p></td></tr><tr><td><p>Summary</p></td><td><p>This use case allows User to change the group owner of  a named remote file.  It is the equivalent of the "chgrp" bash command. </p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td><p>The new group owner of the specified file is set.</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. User submits the change group owner command with the file, the new group to set, the involved host.</p><p>2. The  System sets the new group owner to the file. </p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. If there are missing parameters, a message that contains the way to use the command, is displayed on the standard output of the client System.</p><p>1b. If a file is unknown, a message is printed out on the standard output of the client System.</p><p>1c. If User does not have execute permission in a parent    directory or if User is not the file owner or Admin, a permission denied message is displayed on the standard output of the client System.</p></td></tr><tr><td><p>Extension of</p></td><td><p>F1- Execute simple command on a remote host</p></td></tr></tbody></table></div></div><div class="section" title="F1.CR1- Create new files"><div class="titlepage"><div><div><h3 class="title"><a id="id2838443"></a>F1.CR1- Create new files</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>F1.CR1- Create new files</p></td></tr><tr><td><p>Summary</p></td><td><p>This use case allows User to  create  new file in a given host. It is the equivalent of the "touch" bash command. </p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td><p>The new file is created in the specified host and is owned by User and his group.</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. User submits the create file command with the path of file to create, the involved host.</p><p>2. The System creates the new file with the specified path.</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. If there are missing parameters, a message that contains the way to use the command, is displayed on the standard output of the client System.</p><p>1b. If a specified file already exists, a message is printed out on the standard output of the client System.</p><p>1c. If User does not  have execute or write permission in a parent directory, a message is also printed out on the standard output of the client System.</p></td></tr><tr><td><p>Extension of</p></td><td><p>F1- Execute simple command on a remote host</p></td></tr></tbody></table></div></div><div class="section" title="F1.CR2- Create new directories"><div class="titlepage"><div><div><h3 class="title"><a id="id2838588"></a>F1.CR2- Create new directories</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>F1.CR2- Create new directories</p></td></tr><tr><td><p>Summary</p></td><td><p>This use case allows User to  create a new directory in a named host. It is the equivalent of the "mkdir" bash command. </p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td><p>The new directory is created in the specified host and is owned by User and his group.</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. User submits the create directory command with the path of directory to create, the involved host.</p><p>2. The System creates the new directory with the specified path.</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. If there are missing parameters, a message that contains the way to use the command, is displayed on the standard output of the client System.</p><p>1b. If the a specified directory already exists, a message is printed out on the standard output of the client System.</p><p>1c. If User does not have read or write permission in a parent directory, a message is also printed on the standard output of the client System.</p></td></tr><tr><td><p>Extension of</p></td><td><p>F1- Execute simple command on a remote host</p></td></tr></tbody></table></div></div><div class="section" title="F1.DE1- Delete files"><div class="titlepage"><div><div><h3 class="title"><a id="id2838735"></a>F1.DE1- Delete files</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>F1.DE1- Delete files</p></td></tr><tr><td><p>Summary</p></td><td><p>This use case allows User to remove a given remote file. It is the equivalent of the "rm" bash command. </p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td><p>The specified file is removed from the host.</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. User submits the delete file command with the path of the file to delete, the involved host.</p><p>2. The System deletes the specified file from the host.</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. If there are missing parameters, a message that contains the way to use the command, is displayed on the standard output of the client System.</p><p>1b. If the specified path is not a file or if the file is unknown, a message is  printed out on the standard output of the client System.</p><p>1c. If User does not  have execute or write permission in the parent directory, a message is also printed out on the standard output of the client System.</p></td></tr><tr><td><p>Extension of</p></td><td><p>F1- Execute simple command on a remote host</p><p>F1- Execute simple command on a remote host</p></td></tr></tbody></table></div></div><div class="section" title="F1.DE2- Delete directories"><div class="titlepage"><div><div><h3 class="title"><a id="id2838883"></a>F1.DE2-  Delete directories</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>F1.DE2-  Delete directories</p></td></tr><tr><td><p>Summary</p></td><td><p>This use case allows User to remove a given directory (and its content) located on a remote host. It is the equivalent of the "rm -r" bash command. </p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td><p>The specified directory is removed from the given host.</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. User submits the delete directory command with the path of directory to delete, the involved host.</p><p>2. The System deletes the specified directory from the host.</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. If there are missing parameters, a message that contains the way to use the command, is displayed on the standard output of the client System.</p><p>1b. If the specified path is not a directory or a directory is unknown, a message is printed on the standard output of the client System.</p><p>1c. If User does not  have execute or  write permission in the parent directory,or if the specified directory contains a file which can not be removed, a permission denied message is also printed out on the standard output of the client System.</p></td></tr><tr><td><p>Extension of</p></td><td><p>F1- Execute simple command on a remote host</p></td></tr></tbody></table></div></div><div class="section" title="F1.DI1- Display Head of files"><div class="titlepage"><div><div><h3 class="title"><a id="id2839032"></a>F1.DI1- Display Head of files</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>F1.DI1- Display Head of files</p></td></tr><tr><td><p>Summary</p></td><td><p>This command allows User to print the first few  lines of a given remote file.  It is the equivalent of the "head" bash command. </p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td><p>The first lines of the specified file are printed out on the standard output of the client System.</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. User submits the display command with the path of the file</p><p> to display, the involved host.</p><p>2. The System displays the first lines of the specified file on the standard output of the client System.</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. If there are missing parameters, a message that contains the way to use the command, is displayed on the standard output of the client System.</p><p>1b. If the file is unknown, a message is printed out on the standard output of the client System.</p><p>1c. If User does not  have execute permission write in the parent directory or read permission on the file, a message is also printed out on the standard output of the client System.</p></td></tr><tr><td><p>Extension of</p></td><td><p>F1- Execute simple command on a remote host</p></td></tr></tbody></table></div></div><div class="section" title="F1.DI2- Display tail of files"><div class="titlepage"><div><div><h3 class="title"><a id="id2839182"></a>F1.DI2- Display tail of files</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>F1.DI2- Display tail of files</p></td></tr><tr><td><p>Summary</p></td><td><p>This command allows User to print the last few  lines of a named  remote file. It is the equivalent of the "tail" bash command. </p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td><p>The last lines of the specified file are printed out on the standard output of the client System.</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. User submits the display command with the path of the file to display, the involved host.</p><p>2. The System displays the last lines of the specified file on the  standard output of the client System.</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. If there are missing parameters, a message that contains the way to use the command, is displayed on the standard output of the client System.</p><p>1b. If the file is unknown, a message is printed on the standard output of the client System.</p><p>1.c  If User does not  have execute permission in the parent directory or read permission on the file, a permission denied message is also printed on the standard output of the client System.</p></td></tr><tr><td><p>Extension of</p></td><td><p>F1- Execute simple command on a remote host</p></td></tr></tbody></table></div></div><div class="section" title="F1.DI3- Display contents of files"><div class="titlepage"><div><div><h3 class="title"><a id="id2839330"></a>F1.DI3- Display contents of files</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>F1.DI3- Display contents of files</p></td></tr><tr><td><p>Summary</p></td><td><p>This use case allows User to print the content of a given file</p><p>located on a remote host.  It is the equivalent of the "cat" bash command. </p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td><p>The named file is printed on the standard output of the client System.</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. User submits the display command with the path of the file to display, the involved host.</p><p>2. The  System prints the specified file on the standard output of the client System.</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. If there are missing parameters, a message that contains the way to use the command, is displayed on the standard output of the client System.</p><p>1b. If the file is unknown, a message is printed on the standard output of the client System.</p><p>1c. If User does not have execute  permission in the parent directory or read permission on the file, a message is also printed on the standard output of the client System.</p></td></tr><tr><td><p>Extension of</p></td><td><p>F1- Execute simple command on a remote host</p></td></tr></tbody></table></div></div><div class="section" title="F1.DI4- Display contents of directories"><div class="titlepage"><div><div><h3 class="title"><a id="id2839479"></a>F1.DI4- Display contents of directories</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>F1.DI4- Display contents of directories</p></td></tr><tr><td><p>Summary</p></td><td><p>This use case allows User to list the files contained in a given directory located on a remote host. It is the equivalent of the "ls" bash command. </p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td><p>The  content of the specified directory is printed out on the standard output of the client System.</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. User submits the display command with the path of the directory to list, the involved host.</p><p>2. The System displays the content of the specified directory on the standard output of the client System.</p></td></tr><tr><td><p>Branch sequence</p></td><td><p>1a. If no directory is given , the content of current directory is displayed on the standard output of the client System.</p><p>1b.If a file is given, some information about the file (like the access permissions, the owner, the size, etc...) is printed out on the standard output of the client System.</p></td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. If the directory is unknown, a message is printed out on the standard output of the client System.</p><p>1b. If User does not  have execute or read permission in the parent directory, a message is also printed out on the standard output of the client System.</p></td></tr><tr><td><p>Extension of</p></td><td><p>F1- Execute simple command on a remote host</p></td></tr></tbody></table></div></div><div class="section" title="F1.DI5- Get information about remote files"><div class="titlepage"><div><div><h3 class="title"><a id="id2839632"></a>F1.DI5- Get information about remote files</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>F1.DI5- Get information about remote files</p></td></tr><tr><td><p>Summary</p></td><td><p>This use case allows User to get information  about a named  remote file (the path, the owner, the group, the access permissions, the owner numeric identifier, the group numeric identifier, the size, the last access time, the last modification time, the last inode change time ). It is equivalent to  "stat" bash command.</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td><p>Some informations about the given file are printed out on the standard output of the client System.</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. User submits the get information  command with the file,  the involved host.</p><p>2. The System prints out the information about the specified file on the standard output of the client System.</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. If there are missing parameters, a message that contains the way to use the command, is displayed on the standard output of the client System.</p><p>1b. If the file is unknown, a message is printed out on the standard output of the client System.</p><p>1.c  If User does not  have execute permission in the parent directory, a permission denied message is also printed out on the standard output of the client.</p></td></tr><tr><td><p>Extension of</p></td><td><p>F1- Execute simple command on a remote host</p></td></tr></tbody></table></div></div><div class="section" title="F2.CA1- Cancel files tranfers"><div class="titlepage"><div><div><h3 class="title"><a id="id2839786"></a>F2.CA1- Cancel  files tranfers</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>F2.CA1- Cancel  files tranfers</p></td></tr><tr><td><p>Summary</p></td><td><p>This use case allows User to cancel all asynchronous file transfers he submitted. He can optionally specify either</p><p>- a file transfer identifier to cancel  that file transfer.</p><p>- or a machine identifier to cancel  all file transfers he submitted from that machine.</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td><p>User has at least an open active session.</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- All file transfers submitted by User are cancelled. If a search criteria is provided, only file transfers matching that criteria are cancelled.</p><p>- The log System has been updated and contains request parameters.</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. User submits a cancel file transfer command by specifying the session key. with optionally a search criteria (either a file transfer id,  or a machine id).</p><p>2. The System cancels all file transfers he submitted. If a search criteria is provided, the System cancels only the file transfers matching that criteria.</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. If there are missing parameters, a message that contains the way to use the command, is displayed on the standard output of the client System.</p><p>1b. If the given session key  is invalid, a message is printed out on the standard output of the client System.</p><p>1c. If a tranfer id is invalid or if User did not submit a named file tranfer,a message is printed out on the standard output of the client System.</p><p>1d.  If the specified host id is invalid or if no file tranfer was submitted by User from that host, a message is printed out on the standard output of the client System.</p><p>1e. If the command fails, a message is printed on the standard output of the client System. </p></td></tr></tbody></table></div></div><div class="section" title="F2.CA2- Cancel all users file transfers"><div class="titlepage"><div><div><h3 class="title"><a id="id2839944"></a>F2.CA2- Cancel all users file transfers</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>F2.CA2- Cancel all users file transfers</p></td></tr><tr><td><p>Summary</p></td><td><p>This use case allows Admin to cancel all  current asynchronous file transfers submitted. He can  an optional search criteria among : </p><p>- a host identifier to cancel  all file transfers submitted from that host </p><p>- or an user identifier to cancel  all file transfers submitted by that user.</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin, Admin</p></td></tr><tr><td><p>Precondition</p></td><td><p>Admin has at least an open active session.</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- All file transfers submitted are cancelled. If a search criteria is provided, only the file transfers matching that criteria are cancelled.</p><p>- The log System has been updated and contains request parameters.</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. Admin submits  the cancel file transfer command by specifying a session key, with optionally a search criteria (either a host id, or a user id).</p><p>2. The System cancels all  file transfers submitted. If a search criteria is provided, The System cancels only the file transfer matching that criteria.</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. If there are missing parameters, a message that contains the way to use the command, is displayed on the standard output of the client System.</p><p>1b.  If the specified session key  is invalid , a message is printed out on the standard output of the client System.</p><p>1c.  If the specified host id is invalid or there is no file tranfer submitted from that host, a message is printed out on the standard output of the client System.</p><p>1d.  If the specified user id is invalid or there is no file tranfer submitted by that user, a message is printed out on the standard output of the client System.</p><p>1e. If the command fails, a message is printed on the standard output of the client System. </p></td></tr></tbody></table></div></div><div class="section" title="F2.CP1- Execute a synchronous copy of files"><div class="titlepage"><div><div><h3 class="title"><a id="id2840103"></a>F2.CP1- Execute a synchronous copy of files </h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>F2.CP1- Execute a synchronous copy of files </p></td></tr><tr><td><p>Summary</p></td><td><p>This use case allows User to copy a file (or directory)  between two hosts.</p><p> It is the equivalent of the "cp" bash command. The four cases of transfer are covered by this use case :</p><p>- inside the same host which can be local or remote,</p><p>- from local host to remote host, </p><p>- from remote host to local host,</p><p>- from remote host to another remote host.</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td><p>User has an open active VISHNU session on the client.</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The file transfer is fully  accomplished and a copy of the source file (or directory) is now on the destination host.</p><p>- The log System  has been updated and contains request parameters.</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. User submits the file tranfer command with the path of the source file (or directory) to copy (including the host), the path of destination (including the host) and the session key.</p><p>2.The System copies the given source file (or directory) to the specified destination.</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. If there are missing parameters, a message that contains the way to use the command, is displayed on the standard output of the client System.</p><p>1b. If the given session key is invalid, a message is printed on the standard output of the client System.</p><p>1c. If the source file (or directory) or a host is unknown, a message is printed on the standard output of the client System. </p><p>1d. If the destination path is invalid, a message is printed on standard output of the client System.</p><p>1e. If the source path is a directory and a destination path is a file, a message is printed out on the standard output of the client System.</p><p>1f. If the source path is the same than the destination path,</p><p>a message is returned.</p><p>1g. If</p><p>- User does not  have execute permission in the source or destination file parent,</p><p>- or he does not have read permission on the source file,</p><p>- or  he does not have write permission in the destination parent directory,</p><p>a message is printed out on the standard output of the client System.</p><p>2a. If  a host is unreachable during a file transfer, the file transfer is cancelled and will restart when the connexion will be restored. </p><p>2b. If the transfer file fails, a message is also printed on the standard output of the client System.</p></td></tr><tr><td><p>Extensions</p></td><td><p>F2.MV1- Execute a synchronous move of files</p></td></tr></tbody></table></div></div><div class="section" title="F2.CP2- Execute an asynchronous copy of files"><div class="titlepage"><div><div><h3 class="title"><a id="id2840314"></a>F2.CP2- Execute an asynchronous copy of files </h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>F2.CP2- Execute an asynchronous copy of files </p></td></tr><tr><td><p>Summary</p></td><td><p>This use case allows User to copy files (or directory)  between two hosts  and submit another command without waiting the end of file transfer. </p><p>The four cases of transfer are covered this use case :</p><p>- inside the same host which can be local or remote</p><p>- from local host to remote host</p><p>- from remote host to local host</p><p>- from remote host to another remote host. </p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td><p>User has an active open session on the client</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The file transfer is fully  accomplished and a copy of the source file (or directory) is now on the destination host.</p><p>- The log System  has been updated and contains request parameters.</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. User submits the file tranfer command with the path of the source file (or directory) to copy (including the host), the path of destination (including the host) and the session key.</p><p>2. The System starts the transfer of the given source file to the specified destination and sends back to User a transfer id.</p><p>3. When the transfer file ends, the log System is updated.</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. If there are missing parameters, a message that contains the way to use the command, is displayed on the standard output of the client System.</p><p>1b. If the given session key is invalid, a message is printed on the standard output of the client System.</p><p>1c. If the source file (or directory)  or a host is unknown , a message is printed on the standard output of the client System. </p><p>1d. If the destination path is invalid, a message is printed on standard output of the client System.</p><p>1e. If the source path is a directory and the destination path is a file, a message is printed out on the standard output of the client System.</p><p>1f. If the source path is the same than the destination path,</p><p>a message is print out on the standard output of the client System. </p><p>1g. If</p><p>- User does not  have execute permission in the source or destination file parent,</p><p>- or he does not have read permission on the source file,</p><p>- or  he does not have write permission in the destination parent directory,</p><p>a message is printed out on the standard output of the client System.</p><p>2a. If  a host is unreachable during a file transfer, the file transfer is cancelled and will restart when the connexion will be restored. </p><p>2b. If the transfer file fails, a message is also printed on the standard output of the client System.</p></td></tr><tr><td><p>Extensions</p></td><td><p>F2.MV2- Execute an asynchronous move of files</p></td></tr></tbody></table></div></div><div class="section" title="F2.LS1- List file transfer status"><div class="titlepage"><div><div><h3 class="title"><a id="id2840527"></a>F2.LS1- List file transfer status</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>F2.LS1- List file transfer status</p></td></tr><tr><td><p>Summary</p></td><td><p>This use case allows User to list all  file transfer status he submitted. He can optionally specify either</p><p>- a file transfer identifier to get the status of that file transfer.</p><p>- or a machine identifier to get the status of all file transfer he submitted from that machine.</p></td></tr><tr><td><p>Actors</p></td><td><p>User, User</p></td></tr><tr><td><p>Precondition</p></td><td><p>User has at least an open active session.</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The status of all file transfers User submitted are displayed on the standard output of client System. If a search criteria is provided, only the status of the file transfer matching that criteria are listed.</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. User submits a list file transfer status command by specifying a session key, with optionally a search criteria (either a file transfer id,  or a machine id).</p><p>2. The System displays  the status of all file transfers User submitted. If a search criteria is provided, the System displays only the status of the  file transfers matching that criteria.</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. If there are missing parameters, a message that contains the way to use the command, is displayed on the standard output of the client System.</p><p>1b.  If the specified session key  is invalid , a message is printed out on the standard output of the client System.</p><p>1c.  If the specified machine id is invalid , a message is printed out on the standard output of the client System.</p><p>1d.  If the specified file transfer id is invalid , a message is printed out on the standard output of the client System.</p><p>1d. If no transfer was submitted by User from the specified machine or if the command fails, a message is printed out on the standard output of the client System. </p></td></tr><tr><td><p>Extensions</p></td><td><p>F2.LS2- List all users file transfer status</p></td></tr></tbody></table></div></div><div class="section" title="F2.LS2- List all users file transfer status"><div class="titlepage"><div><div><h3 class="title"><a id="id2840696"></a>F2.LS2- List all users file transfer status</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>F2.LS2- List all users file transfer status</p></td></tr><tr><td><p>Summary</p></td><td><p>This use case allows Admin to list file transfer status. He can specify an optional search criteria among : </p><p>- a host identifier to list the status of all file transfers submitted from that host </p><p>- or an user identifier to list the status of all file transfers submitted by that user.</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin, Admin</p></td></tr><tr><td><p>Precondition</p></td><td><p>Admin has at least an open active session.</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The status of all file transfers submitted  host are displayed on the standard output. If a search criteria is provided, only the file transfer matching that criteria are listed.</p><p>- The log System has been updated and contains request parameters.</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. Admin submits a list file transfer status command a session key, with optionally a search criteria (either a host id, or a user id).</p><p>2. The System displays the status of all  file transfers on the standard output of client System. If a search criteria is provided, The System displays only the status of the file transfers matching that criteria.</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. If there are missing parameters, a message that contains the way to use the command, is displayed on the standard output of the client System.</p><p>1b.  If the specified session key  is invalid , a message is printed out on the standard output of the client System.</p><p>1c.  If the specified machine id is invalid , a message is printed out on the standard output of the client System.</p><p>1c.  If the specified user id is invalid , a message is printed out on the standard output of the client System.</p><p>1d. If no transfer was submitted  from the specified machine, a message is printed out on the standard output of the client System.</p><p>1e. If no transfer was submitted by the specified user or if the command fails, a message is printed out on the standard output of the client System.  </p></td></tr><tr><td><p>Extension of</p></td><td><p>F2.LS1- List file transfer status</p></td></tr></tbody></table></div></div><div class="section" title="F2.LT1- List all file transfer"><div class="titlepage"><div><div><h3 class="title"><a id="id2840873"></a>F2.LT1- List all file transfer  </h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>F2.LT1- List all file transfer  </p></td></tr><tr><td><p>Summary</p></td><td><p>This use case allows User to list all file transfers he submitted. User can optionally  specify either</p><p>- a machine id to list all file transfers he submitted  from that machine</p><p>- or a status to list all file transfers matching that status.</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td><p>User has at least an open active session.</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- All  file transfers User submitted are listed on the standard output of client System. If a search criteria is provided, only the file transfers matching that criteria are listed.</p><p>- The log System has been updated and contains request parameters.</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. User submits a list file transfer command by specifying a session key with optionally a search criteria (either a host id,  or a specific status).</p><p>2. The System displays all  file transfers User submitted on the standard output of client System. If a search criteria is provided, the System displays only the file transfer matching that criteria.</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. If there are missing parameters, a message that contains the way to use the command, is displayed on the standard output of the client System.</p><p>1b.  If the specified session key  is invalid , a message is printed out on the standard output of the client System.</p><p>1c.  If the specified machine id is invalid , a message is printed out on the standard output of the client System.</p><p>1d.  If the specified status is invalid , a message is printed out on the standard output of the client System.</p><p>1e. If no transfer was submitted  from the specified machine, a message is printed out on the standard output of the client System.</p><p>1f. If the command fails, a message is printed out on the standard output of the client System. t System. </p></td></tr></tbody></table></div></div><div class="section" title="F2.LT2- List all users file transfer"><div class="titlepage"><div><div><h3 class="title"><a id="id2841035"></a>F2.LT2- List all users file transfer  </h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>F2.LT2- List all users file transfer  </p></td></tr><tr><td><p>Summary</p></td><td><p>This use case allows Admin to list all  file transfers. Admin can specify an optional search criteria among:</p><p>- host identifier: to list all file transfers submitted from that host</p><p>- user identifier: to list all file transfers submitted by that user</p><p>- status: to list all file transfer matching that status.</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin, Admin</p></td></tr><tr><td><p>Precondition</p></td><td><p>User has at least an open active session.</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- All  file transfers are listed on the standard output of client System. If a search criteria is provided, only the file transfers matching that criteria are listed.</p><p>- The log System has been updated and contains request parameters. </p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. Admin submits a list file transfer  command by  specifying a session key with optionally a search criteria (either a host id, or a user id, or a specific status).</p><p>2. The System displays all  file transfers on the standard output of client System. If a search criteria is provided, The System displays only the file transfer matching that criteria.</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. If there are missing parameters, a message that contains the way to use the command, is displayed on the standard output of the client System.</p><p>1b.  If the specified session key  is invalid , a message is printed out on the standard output of the client System.</p><p>1c.  If the specified machine id is invalid , a message is printed out on the standard output of the client System.</p><p>1d.  If the specified user id is invalid , a message is printed out on the standard output of the client System.</p><p>1d.  If the specified status is invalid , a message is printed out on the standard output of the client System.</p><p>1e. If no transfer was submitted  from the specified machine, or by the specified user, a message is printed out on the standard output of the client System.</p><p>1e. If the command fails, a message is printed out on the standard output of the client System. t System. </p></td></tr></tbody></table></div></div><div class="section" title="F2.MV1- Execute a synchronous move of files"><div class="titlepage"><div><div><h3 class="title"><a id="id2841205"></a>F2.MV1- Execute a synchronous move of files</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>F2.MV1- Execute a synchronous move of files</p></td></tr><tr><td><p>Summary</p></td><td><p>This use case allows User to copy a file  (directory) from a host to another host. Furthermore, the source file  (directory) is removed from the source host.</p><p>The four cases of transfer are covered this use case :</p><p>- inside the same host which can be local or remote</p><p>- from local host to remote host</p><p>- from remote host to local host</p><p>- and from remote host to another remote host.</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td> </td></tr><tr><td><p>Postcondition</p></td><td><p>- The file transfer is fully accomplished.</p><p>- A copy of the source file (directory) is now on the destination host,</p><p>- and the source file (directory) is removed from the source host.</p><p>- The log System  has been updated and contains request parameters.</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. User submits the tranfer file  command with the path of the source files (or directoty) to copy (including the host), the path of destination (including the host) and the session key.</p><p>2. The System makes a copy of  the given source file (directory) to the specified destination and removes the source file (directory) from the source host.</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. If there are missing parameters, a message that contains the way to use the command, is displayed on the standard output of the client System.</p><p>1b. If the given session key is invalid, a message is printed on the standard output of the client System.</p><p>1c. If the source file (or directory) or the host is unknown, a message is printed on the standard output of the client System. </p><p>1d. If the destination path is invalid, a message is printed on standard output of the client System.</p><p>1e. If the source path is a directory and the destination path is a file, a message is printed out on the standard output of the client System.</p><p>1f. If</p><p>- User does not  have execute permission in the source or destination file parent,</p><p>- or he does not have read permission on the source file,</p><p>- or  he does not have write permission in the destination parent directory,</p><p>a message is printed out on the standard output of the client System.</p><p>2a. If  a host is unreachable during a file transfer, the file transfer is cancelled and will restart when the connexion will be restored. </p><p>2b. If the transfer file fails, a message is also printed on the standard output of the client System.</p></td></tr><tr><td><p>Extension of</p></td><td><p>F2.CP1- Execute a synchronous copy of files </p></td></tr></tbody></table></div></div><div class="section" title="F2.MV2- Execute an asynchronous move of files"><div class="titlepage"><div><div><h3 class="title"><a id="id2841411"></a>F2.MV2- Execute an asynchronous move of files</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>F2.MV2- Execute an asynchronous move of files</p></td></tr><tr><td><p>Summary</p></td><td><p>This use case allows User to move file (or directory) from host to another host and submit another command without waiting the end of file transfer. Furthermore, the source file (or directory) is removed from the source host.</p><p>The four cases of transfer are covered this use case :</p><p>- inside the same host which can be local or remote</p><p>- from local host to remote host</p><p>- from remote host to local host</p><p>- and from remote host to another remote host.</p></td></tr><tr><td><p>Actors</p></td><td><p>User</p></td></tr><tr><td><p>Precondition</p></td><td><p>User has at least an open active session.</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The file transfer is in completed status.</p><p>- The source file (or directory) is removed from the source hosts.</p><p>- The System log has been updated and contains request parameters.</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1. User submits the file tranfer command with the path of the source file (or directory) to copy (including the host), the path of destination (including the host) and the session key.</p><p>2. The System starts the transfer of the given source file (or directory) to the specified destination and sends back to User a transfer id.</p><p>3. At the end of a transfer, the log System is updated.</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>1a. If there are missing parameters, a message that contains the way to use the command, is displayed on the standard output of the client System.</p><p>1b. If the given session key is invalid, a message is printed on the standard output of the client System.</p><p>1c. If the source file (or directory) or the host is unknown , a message is printed on the standard output of the client System.</p><p> </p><p>1d. If the destination path is invalid, a message is printed on standard output of the client System.</p><p>1e. If the source path is a directory and a destination path is a file, a message is printed out on the standard output of the client System.</p><p> </p><p>1f. If</p><p>- User does not  have execute permission in the source or destination file parent,</p><p>- or he does not have read permission on the source file,</p><p>- or  he does not have write permission in the destination parent directory,</p><p>a message is printed out on the standard output of the client System.</p><p>2a. If  a host is unreachable during a file transfer, the file transfer is cancelled and will restart when the connexion will be restored. </p><p>2b. If the transfer file fails, a message is also printed on the standard output of the client System.</p></td></tr><tr><td><p>Extension of</p></td><td><p>F2.CP2- Execute an asynchronous copy of files </p></td></tr></tbody></table></div></div><div class="section" title="F3. Launch FMS server"><div class="titlepage"><div><div><h3 class="title"><a id="id2841626"></a>F3. Launch FMS server</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>F3. Launch FMS server</p></td></tr><tr><td><p>Summary</p></td><td><p>This use case allows Admin to launch the VISHNU FMS server on a given host.</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td><p>- The VISHNU server software (FMS Module and dependencies) is installed on the host</p><p>- The host is configured in the VISHNU System database</p><p>- The network connection between the host and the VISHNU database server is up and running.</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The FMS server is up and running.</p><p>- A server log has been created.</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1.  Admin logs in the host as VISHNU user</p><p>2.  Admin updates the VISHNU configuration if necessary (database server hostname and credentials, SysferaDS configuration )</p><p>3.  Admin launches the VISHNU FMS Server executable</p><p>4. The System checks the connections to its peers within the VISHNU platform.</p><p>5. The System retrieves the list of active file transfer (not completed file transfer) that were launched from or to the same host.</p><p>6. The System checks that all the active file transfer (from previous step) are still running, and eventually updates the file transfer status (for ex. from failed to in progress).</p><p>7. The System returns a status message to Admin.</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td><p>4a. A connection to a VISHNU peer is down. System returns an error message and stops.</p><p>6a. If a source file or destination is unreachable. In this case the System updates the file transfer status to failed.</p></td></tr></tbody></table></div></div><div class="section" title="F4. Stop FMS server"><div class="titlepage"><div><div><h3 class="title"><a id="id2841783"></a>F4. Stop FMS server</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td><p>Title</p></td><td><p>F4. Stop FMS server</p></td></tr><tr><td><p>Summary</p></td><td><p>This use case allows Admin to stop the VISHNU FMS server on a given host.</p></td></tr><tr><td><p>Actors</p></td><td><p>Admin</p></td></tr><tr><td><p>Precondition</p></td><td><p>- The FMS Server is up and running on the given host.</p></td></tr><tr><td><p>Postcondition</p></td><td><p>- The FMS Server is down.</p></td></tr><tr><td><p>Base sequence</p></td><td><p>1.  Admin sends a request to stop the FMS Server and provides the host identifier.</p><p>2. The System updates the status of all on-going file transfer requests.</p><p>3. The System stops all internal processes on the host.</p><p>4. The System returns an information message to Admin.</p></td></tr><tr><td><p>Branch sequence</p></td><td> </td></tr><tr><td><p>Exception sequence</p></td><td> </td></tr></tbody></table></div></div></div><div class="section" title="Data dictionary"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2841910"></a>Data dictionary</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="bold"><strong>Host</strong></span>:  Computer connected to other computers or terminals to which it provides data or computing services via a network.</p></li><li class="listitem"><p><span class="bold"><strong>Inode</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>An inode is a data structure on a filesystem on Linux and other Unix-like operating systems that stores all the information about a file except its name and its actual data.</p></li><li class="listitem"><p>When a file is created, it is assigned both a name and an inode number, which is an integer that is unique within the filesystem. </p></li><li class="listitem"><p> An inode contains all information describing a file. </p></li><li class="listitem"><p>This  includes (1) the size of the file (in bytes) and its physical location (i.e., the addresses of the blocks of storage containing the file's data on a HDD), </p></li><li class="listitem"><p>(2) the file's owner and group, (3) the file's access permissions,</p></li><li class="listitem"><p> (4) timestamps telling when the inode was created, last modified and last accessed and (5) a reference count telling how many hard links point to the inode. </p></li></ul></div></li><li class="listitem"><p><span class="bold"><strong>Path</strong></span>: String of characters denoting the complete location of a file or folder (directory) in the host's data filing system.</p></li><li class="listitem"><p><span class="bold"><strong>Permissions</strong></span>: The set of rights (read, write, execute) that are related to a file for a given user on a Unix filesystem.</p></li></ul></div></div></div></div></body></html>
